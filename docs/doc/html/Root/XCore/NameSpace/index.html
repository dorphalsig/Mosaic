<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<TITLE>
NameSpace
</TITLE>
</HEAD>
<FONT SIZE="+2"><B>NameSpace</B></FONT><BR><BR><HR>
<FONT SIZE="+1"><B>Overview</B></FONT><BR>
<P>

      A name space is a container of named elements. A name space defines two
      operations 'getElement/1' and 'hasElement/1' that are used to get an element
      by name and check for an element by name. Typically a name space will contain
      different categories of elements in which case the name space will place
      the contained elements in its contents table and in a type specific collection.
      For example, a class is a container for operations, attributes and constraints.
      Each of these elements are placed in the contents table for the class and in
      a slot containing a collection with the names 'operations', 'attributes';
      and 'constraints' respectively. The special syntax '::' is used to invoke the
      'getElement/1' operation on a name space.
    
<BR><HR><BR>
<B>Parents</B>
<A HREF="../../../Root/XCore/IndexedContainer/index.html">IndexedContainer</A>
,<A HREF="../../../Root/XCore/NamedElement/index.html">NamedElement</A>
,<A HREF="../../../Root/XCore/DocumentedElement/index.html">DocumentedElement</A>
,<A HREF="../../../Root/XCore/Container/index.html">Container</A>
,<A HREF="../../../Root/XCore/Contained/index.html">Contained</A>
,<A HREF="../../../Root/XCore/Object/index.html">Object</A>
,<A HREF="../../../Root/XCore/Element/index.html">Element</A>
<BR><HR><BR>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructors</B></FONT></TD>
</TR>
</TABLE>
<BR><HR><BR>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=3><FONT SIZE="+2">
<B>Attributes</B></FONT></TD>
</TR>
<TR><TD><B>bindings</B></TD><TD><A HREF="../../../Root/XCore/Bind/index.html">Set(Bind)<A></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B>imports</B></TD><TD><A HREF="../../../Root/XCore/NameSpace/index.html">Seq(NameSpace)<A></TD><TD>No Documentation Specified</TD></TR>
<TR>
<TD COLSPAN=3>
<FONT SIZE="-1">
<B>From</B> <A HREF="../../../Root/XCore/IndexedContainer/index.html">IndexedContainer</A>: contents. <BR><B>From</B> <A HREF="../../../Root/XCore/NamedElement/index.html">NamedElement</A>: name. <BR><B>From</B> <A HREF="../../../Root/XCore/DocumentedElement/index.html">DocumentedElement</A>: documentation. <BR><B>From</B> <A HREF="../../../Root/XCore/Contained/index.html">Contained</A>: owner. <BR><B>From</B> <A HREF="../../../Root/XCore/Element/index.html">Element</A>: roleFiller. <BR></FONT>
</TD>
</TR>
</TABLE>
<BR><HR><BR>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="2" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Operations</B></FONT></TD>
</TR>
<TR><TD><B><a href="#add">add</a>(element:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#addBinding">addBinding</a>(binding:<A HREF="../../../Root/XCore/Bind/index.html">Bind<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#addImport">addImport</a>(n:<A HREF="../../../Root/XCore/NameSpace/index.html">NameSpace<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#allHTMLEntries">allHTMLEntries</a>():<A HREF="../../../Root/XCore/NamedElement/index.html">Seq(NamedElement)<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#allHTMLPackages">allHTMLPackages</a>():<A HREF="../../../Root/XCore/NamedElement/index.html">Seq(NamedElement)<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#allImports">allImports</a>():<A HREF="../../../Root/XCore/NameSpace/index.html">Seq(NameSpace)<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#createSnapshot">createSnapshot</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#define">define</a>(element:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,nameSpace:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,isForward:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#generateHTML">generateHTML</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#getChildren">getChildren</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#getContents">getContents</a>(name:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#getElement">getElement</a>(name:<A HREF="../../../Root/XCore/String/index.html">String<A>):<A HREF="../../../Root/XCore/Contained/index.html">Contained<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#getInstantiableClasses">getInstantiableClasses</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#graphViz">graphViz</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#hasBinding">hasBinding</a>(name:<A HREF="../../../Root/XCore/String/index.html">String<A>):<A HREF="../../../Root/XCore/Boolean/index.html">Boolean<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#hasElement">hasElement</a>(name:<A HREF="../../../Root/XCore/String/index.html">String<A>):<A HREF="../../../Root/XCore/Boolean/index.html">Boolean<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#importedFrom">importedFrom</a>(e:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/NameSpace/index.html">NameSpace<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#imports">imports</a>(e:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Boolean/index.html">Boolean<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#init">init</a>(args:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#init">init</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#initBindings">initBindings</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#lift">lift</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#liveDoc">liveDoc</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#lookupPath">lookupPath</a>(path:<A HREF="../../../Root/XCore/String/index.html">Seq(String)<A>,default:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#nameChanged">nameChanged</a>(namedElement:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,newName:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,oldName:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#names">names</a>():<A HREF="../../../Root/XCore/String/index.html">Set(String)<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#newName">newName</a>(root:<A HREF="../../../Root/XCore/String/index.html">String<A>):<A HREF="../../../Root/XCore/String/index.html">String<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#populateGraphViz">populateGraphViz</a>(browser:<A HREF="../../../Root/GraphViz/DiagramBrowser/index.html">DiagramBrowser<A>,gv:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#putElement">putElement</a>(name:<A HREF="../../../Root/XCore/String/index.html">String<A>,value:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#redefine">redefine</a>(newElement:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#remove">remove</a>(element:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#removeBinding">removeBinding</a>(name:<A HREF="../../../Root/XCore/String/index.html">String<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#removeImport">removeImport</a>(n:<A HREF="../../../Root/XCore/NameSpace/index.html">NameSpace<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#resolveNameClash">resolveNameClash</a>(name:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,collection:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#syntaxClasses">syntaxClasses</a>():<A HREF="../../../Root/XCore/Class/index.html">Set(Class)<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#toGraphVizPage">toGraphVizPage</a>(browser:<A HREF="../../../Root/GraphViz/DiagramBrowser/index.html">DiagramBrowser<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#toHTML">toHTML</a>(root:<A HREF="../../../Root/XCore/String/index.html">String<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#toHTMLDoc">toHTMLDoc</a>(fout:<A HREF="../../../Root/IO/OutputChannel/index.html">OutputChannel<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#toType">toType</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#writeEcore">writeEcore</a>(path:<A HREF="../../../Root/XCore/String/index.html">String<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR>
<TD COLSPAN=2>
<FONT SIZE="-1">
<B>From</B> <A HREF="../../../Root/XCore/IndexedContainer/index.html">IndexedContainer</A>: add, add, addContentDaemon, contentDaemons, contents, index, indices, init, initContents, remove, removeContentDaemon. <BR><B>From</B> <A HREF="../../../Root/XCore/NamedElement/index.html">NamedElement</A>: getNamedElement, href, labelString, legalNameChangeCheck, name, path, pathSeq, repopulate, setName, toString. <BR><B>From</B> <A HREF="../../../Root/XCore/DocumentedElement/index.html">DocumentedElement</A>: doc, ensureDoc, setDoc. <BR><B>From</B> <A HREF="../../../Root/XCore/Container/index.html">Container</A>: add, addContentDaemon, allContents, allContentsOf, allContentsThat, checkConstraints, checkConstraints, containerCutHandler, containerPastePostHandler, containerPastePreHandler, contentDaemons, contents, contentsOf, contentsThat, deleteContainedDiagrams, deleteRecursive, find, getChildren, getChildrenToolTips, includes, init, initContents, loadXTO, remove, removeContentDaemon, traceAll, untraceAll. <BR><B>From</B> <A HREF="../../../Root/XCore/Contained/index.html">Contained</A>: addTo, allOwners, deleteRecursive, delete_client, delete_client_check, delete_client_redirect, getDefaultClipboardSource, owner, removeFromOwner, setOwner. <BR><B>From</B> <A HREF="../../../Root/XCore/Object/index.html">Object</A>: addDaemon, addDiagramListener, addMissingSlot, addMultiDaemon, addPersistentDaemon, addStructuralFeature, allCompositeValues, allCompositeValuesAndSelf, allDaemonsWithId, allDaemonsWithTarget, applyMapping_client, calcChildrenSlots, changedOnDiagram, compositeValues, daemonNamed, daemonWithId, daemonWithIdAndTarget, daemons, daemonsActive, destroyDaemon, edit, fire, get, getAvailableMappings, getChildren, getChildrenSlots, getChildrenToolTips, getDiagramListenerNamed, getDiagramListeners, getProperties, getProperty, getStructuralFeatureNames, hasDaemonNamed, hasDaemonWithId, hasDaemonWithIdAndTarget, hasDaemonWithTarget, hasProperty, hasSlot, hasStructuralFeature, hotLoad, hotLoaded, ignoreBy, ignoreByAll, init, initSlots, machineInit, nodeEvent, observeBy, observeBy, observedBy, observedBy, oldEdit, orderSequence, orderSequence, propertyTarget, removeDaemon, removeDaemonNamed, removeDaemonsWithId, removeDaemonsWithTarget, removeDiagramListener, removeDiagramListeners, removeStructuralFeature, renameSlot, saveXTO, saveXTOFile, set, setDaemons, setDaemonsActive, setHotLoad, setProperty, showAndLayoutDiagram, showDiagram, slotDenied, slotMissing, slotMissing, slots, synchronise. <BR><B>From</B> <A HREF="../../../Root/XCore/Element/index.html">Element</A>: addTo, allHTMLEntries, allHTMLPackages, assignToGlobal, assignToGlobal, browse, browse_redirect, checkConstraints, copy, copyToClipboard, copyToClipboard_transaction, createDiagram, createDiagramType, createDiagramType, createDiagramType, createTool, cutToClipboard, cutToClipboard_transaction, deleteRecursive, deployXML, die, doc, doubleClick, edit, edit_redirect, equals, error, evaluateExpression, ferror, getChildren, getChildrenToolTips, getDefaultClipboardSource, getDefaultClipboardTarget, graphVizNode, hashCode, init, init, invokeOp, isDeleteProtected, isKindOf, isProtected, isReallyKindOf, isTypeOf, isViewProtected, isWithinNameSpace, labelString, legalNameChangeCheck, legalSlotChangeCheck, legalSlotChangeCheck, lift, nameString, noOperationFound, oclIsKindOf, oclIsTypeOf, of, oldShowDiagram, pasteFromClipboard, populateGraphViz, pprint, pprint, pprint, pprintln, print, println, removeDaemon, removeDaemon, save, save2, selectDiagram, selectModelBrowserNode, send, setDelegation, setOf, setRoleFillerDialog, showAndLayoutDiagram, showDiagram, showModelBrowserNode, slotAffectsLabel, systemId, toHTML, toSVG, toSnapshot, toSnapshot, toString, toType, writeHTML, writeHTML, writeHTMLAllEntries, writeHTMLAllPackages, writeHTMLIndex, writeHTMLOverview, writeXML, writeXMLFile, yield. <BR><TR><TD COLSPAN=2><a name="add"/><FONT FACE="Courier" SIZE="1">@Operation&#160;add(element&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;if&#160;element.isKindOf(Bind)<br>&#160;&#160;then&#160;self.addBinding(element)<br>&#160;&#160;elseif&#160;element.isKindOf(NamedElement)<br>&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;if&#160;element.isKindOf(Attribute)&#160;or&#160;element.isKindOf(Constraint)<br>&#160;&#160;&#160;&#160;then&#160;false<br>&#160;&#160;&#160;&#160;else&#160;element.setOwner(self)<br>&#160;&#160;&#160;&#160;end&#160;;<br>&#160;&#160;&#160;&#160;contents.put(element.name,element);<br>&#160;&#160;&#160;&#160;Kernel_objSetSaveAsLookup(element,true);<br>&#160;&#160;&#160;&#160;self<br>&#160;&#160;else&#160;super(element)<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="addBinding"/><FONT FACE="Courier" SIZE="1">@Operation&#160;addBinding(binding&#160;:&#160;Bind):XCore::Element<br>&#160;&#160;if&#160;self.hasBinding(binding.name)<br>&#160;&#160;then&#160;self.removeBinding(binding.name)<br>&#160;&#160;else&#160;false<br>&#160;&#160;end&#160;;<br>&#160;&#160;self.bindings&#160;:=&#160;bindings-&gt;including(binding);<br>&#160;&#160;binding.setOwner(self);<br>&#160;&#160;self<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="addImport"/><FONT FACE="Courier" SIZE="1">@Operation&#160;addImport(n&#160;:&#160;NameSpace):XCore::Element<br>&#160;&#160;if&#160;not&#160;(imports-&gt;contains(n))<br>&#160;&#160;then&#160;self.imports&#160;:=&#160;Seq{n&#160;|&#160;imports}<br>&#160;&#160;else&#160;false<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="allHTMLEntries"/><FONT FACE="Courier" SIZE="1">@Operation&#160;allHTMLEntries():Seq(NamedElement)<br>&#160;&#160;Seq{self&#160;|&#160;self.contentsOf(NamedElement)-&gt;excluding(self)-&gt;asSeq-&gt;collect(x&#160;|<br>&#160;&#160;&#160;&#160;x.allHTMLEntries())-&gt;flatten}<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="allHTMLPackages"/><FONT FACE="Courier" SIZE="1">@Operation&#160;allHTMLPackages():Seq(NamedElement)<br>&#160;&#160;Seq{self&#160;|&#160;self.contentsOf(Package)-&gt;excluding(self)-&gt;asSeq-&gt;collect(x&#160;|<br>&#160;&#160;&#160;&#160;x.allHTMLPackages())-&gt;flatten}-&gt;sortNamedElements<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="allImports"/><FONT FACE="Courier" SIZE="1">@Operation&#160;allImports():Seq(NameSpace)<br>&#160;&#160;let&#160;allImports&#160;=&#160;Seq{};<br>&#160;&#160;&#160;&#160;&#160;&#160;pending&#160;=&#160;Seq{self};<br>&#160;&#160;&#160;&#160;&#160;&#160;visited&#160;=&#160;Seq{}<br>&#160;&#160;in&#160;@While&#160;not&#160;(pending-&gt;isEmpty)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;n&#160;=&#160;pending-&gt;head<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;pending&#160;:=&#160;pending-&gt;tail;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;not&#160;(visited.includes(n))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;visited&#160;:=&#160;Seq{n&#160;|&#160;visited};<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;@For&#160;i&#160;in&#160;n.imports&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;not&#160;(allImports.contains(i))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;allImports&#160;:=&#160;Seq{i&#160;|&#160;allImports}<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pending&#160;:=&#160;Seq{i&#160;|&#160;pending}<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;allImports<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="createSnapshot"/><FONT FACE="Courier" SIZE="1">@Operation&#160;createSnapshot():XCore::Element<br>&#160;&#160;let&#160;packages&#160;=&#160;Root.allContentsOf(Package)-&gt;asSeq.sortNamedElements()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;selected&#160;=&#160;xmf.selects("Create&#160;Snapshot","Choose&#160;packages&#160;to&#160;snapshot",packages,null,null)<br>&#160;&#160;in&#160;if&#160;selected&#160;&lt;&gt;&#160;0&#160;-&#160;1&#160;andthen&#160;not&#160;selected-&gt;isEmpty<br>&#160;&#160;&#160;&#160;&#160;then&#160;let&#160;name&#160;=&#160;self.newName("snapshot")&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;snapshot&#160;=&#160;XCore::Snapshot(Symbol(name),selected);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;diagramManager&#160;=&#160;xmf.diagramManager()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;self.add(snapshot);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;name&#160;=&#160;diagramManager.newDiagramName(snapshot)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;diagramManager.newDiagram(snapshot,name,"Snapshot&#160;Diagram&#160;(Partial&#160;View)")<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="define"/><FONT FACE="Courier" SIZE="1">@Operation&#160;define(element&#160;:&#160;XCore::Element,nameSpace&#160;:&#160;XCore::Element,isForward&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;let&#160;isNamedElement&#160;=&#160;element.isKindOf(NamedElement)&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;defineNamedElement&#160;=&#160;isNamedElement&#160;and&#160;nameSpace.isKindOf(NameSpace)<br>&#160;&#160;in&#160;if&#160;defineNamedElement<br>&#160;&#160;&#160;&#160;&#160;then&#160;if&#160;nameSpace.hasElement(element.name)&#160;and&#160;NameSpace::replaceDefs<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;nameSpace.redefine(element)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;nameSpace.add(element)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;else&#160;nameSpace.add(element)<br>&#160;&#160;&#160;&#160;&#160;end&#160;;<br>&#160;&#160;&#160;&#160;&#160;if&#160;not&#160;isForward<br>&#160;&#160;&#160;&#160;&#160;then&#160;if&#160;defineNamedElement&#160;andthen&#160;nameSpace.hasElement(element.name)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;nameSpace.getElement(element.name).init()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;element.init()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;elseif&#160;defineNamedElement&#160;andthen&#160;nameSpace.hasElement(element.name)<br>&#160;&#160;&#160;&#160;&#160;then&#160;nameSpace.getElement(element.name)<br>&#160;&#160;&#160;&#160;&#160;else&#160;element<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="generateHTML"/><FONT FACE="Courier" SIZE="1">@Operation&#160;generateHTML():XCore::Element<br>&#160;&#160;let&#160;dir&#160;=&#160;xmf.selectDirectory(xmf.homeDir())<br>&#160;&#160;in&#160;if&#160;dir&#160;&lt;&gt;&#160;""<br>&#160;&#160;&#160;&#160;&#160;then&#160;let&#160;dialog&#160;=&#160;xmf.busy("Generating&#160;HTML")<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;try<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.writeHTML(dir);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dialog.finished();<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;xmf.message("HTML&#160;successfully&#160;generated.")<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;catch(exception)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dialog.finished();<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;exception.edit()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="getChildren"/><FONT FACE="Courier" SIZE="1">@Operation&#160;getChildren():XCore::Element<br>&#160;&#160;super()&#160;-&#160;self.bindings-&gt;collect(b&#160;|<br>&#160;&#160;&#160;&#160;b.name.toString())-&gt;asSeq<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="getContents"/><FONT FACE="Courier" SIZE="1">@Operation&#160;getContents(name&#160;:&#160;XCore::Element):Element<br>&#160;&#160;contents.get(name)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="getElement"/><FONT FACE="Courier" SIZE="1">@Operation&#160;getElement(name&#160;:&#160;String):Contained<br>&#160;&#160;name&#160;:=&#160;if&#160;not&#160;name.isKindOf(Symbol)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;Kernel_mkSymbol(name)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;name<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;;<br>&#160;&#160;if&#160;self.hasElement(name)<br>&#160;&#160;then&#160;self.contents.get(name)<br>&#160;&#160;else&#160;self.error("no&#160;element&#160;"&#160;+&#160;self.name&#160;+&#160;"::"&#160;+&#160;name&#160;+&#160;"&#160;in&#160;"&#160;+&#160;contents.toString())<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="getInstantiableClasses"/><FONT FACE="Courier" SIZE="1">@Operation&#160;getInstantiableClasses():XCore::Element<br>&#160;&#160;self.contents()-&gt;select(c&#160;|<br>&#160;&#160;&#160;&#160;c&#160;&lt;&gt;&#160;null&#160;andthen&#160;c.isKindOf(XCore::Class)&#160;andthen&#160;not&#160;c.isAbstract)&#160;-&#160;if&#160;self&#160;=&#160;XCore<br>&#160;&#160;then&#160;Set{BasicArray,Bind,Buffer,Classifier,CodeBox,Collection,CompiledOperation,Constructor,Daemon,Doc,Exception,ForeignOperation,InitialisedAttribute,InterpretedOperation,MachineException,Operation,Parameter,Seq,Set,Snapshot}<br>&#160;&#160;else&#160;Set{}<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="graphViz"/><FONT FACE="Courier" SIZE="1">@Operation&#160;graphViz():XCore::Element<br>&#160;&#160;let&#160;browser&#160;=&#160;DiagramBrowser(self)<br>&#160;&#160;in&#160;browser.browse();<br>&#160;&#160;&#160;&#160;&#160;browser<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="hasBinding"/><FONT FACE="Courier" SIZE="1">@Operation&#160;hasBinding(name&#160;:&#160;String):Boolean<br>&#160;&#160;bindings-&gt;exists(binding&#160;|<br>&#160;&#160;&#160;&#160;binding.name.toString()&#160;=&#160;name.toString())<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="hasElement"/><FONT FACE="Courier" SIZE="1">@Operation&#160;hasElement(name&#160;:&#160;String):Boolean<br>&#160;&#160;contents.hasKey(if&#160;not&#160;name.isKindOf(Symbol)<br>&#160;&#160;then&#160;Kernel_mkSymbol(name)<br>&#160;&#160;else&#160;name<br>&#160;&#160;end&#160;)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="importedFrom"/><FONT FACE="Courier" SIZE="1">@Operation&#160;importedFrom(e&#160;:&#160;Element):NameSpace<br>&#160;&#160;let&#160;findSeq&#160;=&#160;imports-&gt;asSeq;<br>&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;=&#160;false;<br>&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;=&#160;null<br>&#160;&#160;in&#160;declare(hidden,findSeq);<br>&#160;&#160;&#160;&#160;&#160;declare(hidden,findDone);<br>&#160;&#160;&#160;&#160;&#160;declare(hidden,findResult);<br>&#160;&#160;&#160;&#160;&#160;@While&#160;not&#160;findSeq-&gt;isEmpty&#160;and&#160;not&#160;findDone&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;i&#160;=&#160;findSeq-&gt;head&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findElement&#160;=&#160;findSeq-&gt;head<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;declare(hidden,findElement);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;i.contents()-&gt;includes(e)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;:=&#160;true;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;:=&#160;i<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;findSeq&#160;:=&#160;findSeq-&gt;tail<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;if&#160;not&#160;findDone<br>&#160;&#160;&#160;&#160;&#160;then&#160;null<br>&#160;&#160;&#160;&#160;&#160;else&#160;findResult<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="imports"/><FONT FACE="Courier" SIZE="1">@Operation&#160;imports(e&#160;:&#160;Element):Boolean<br>&#160;&#160;imports-&gt;exists(i&#160;|<br>&#160;&#160;&#160;&#160;i.contents()-&gt;includes(e))<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="init"/><FONT FACE="Courier" SIZE="1">@Operation&#160;init(args&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.init();<br>&#160;&#160;self.imports&#160;:=&#160;imports-&gt;including(XCore)-&gt;including(Root);<br>&#160;&#160;if&#160;args-&gt;size&#160;&gt;&#160;0<br>&#160;&#160;then&#160;if&#160;args-&gt;at(0).isKindOf(String)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;super(args);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.setName(args-&gt;at(0))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;super(args)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;else&#160;super(args)<br>&#160;&#160;end&#160;;<br>&#160;&#160;self<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="init"/><FONT FACE="Courier" SIZE="1">@Operation&#160;init():XCore::Element<br>&#160;&#160;super();<br>&#160;&#160;self.initBindings()<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="initBindings"/><FONT FACE="Courier" SIZE="1">@Operation&#160;initBindings():XCore::Element<br>&#160;&#160;let&#160;elements&#160;=&#160;bindings-&gt;asSeq<br>&#160;&#160;in&#160;@While&#160;not&#160;elements-&gt;isEmpty&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;elements-&gt;head.init();<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;elements&#160;:=&#160;elements-&gt;tail<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;self<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="lift"/><FONT FACE="Courier" SIZE="1">@Operation&#160;lift():XCore::Element<br>&#160;&#160;Element::lift.invoke(self,Seq{})<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="liveDoc"/><FONT FACE="Courier" SIZE="1">@Operation&#160;liveDoc():XCore::Element<br>&#160;&#160;let&#160;textEditorClient&#160;=&#160;xmf.findClient(Clients::TextEditor::TextEditorClient)<br>&#160;&#160;in&#160;if&#160;textEditorClient&#160;&lt;&gt;&#160;null<br>&#160;&#160;&#160;&#160;&#160;then&#160;let&#160;viewer&#160;=&#160;Clients::LiveDocViewer::Viewer(self)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;textEditorClient.newBrowser(viewer)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="lookupPath"/><FONT FACE="Courier" SIZE="1">@Operation&#160;lookupPath(path&#160;:&#160;Seq(String),default&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;if&#160;path-&gt;isEmpty<br>&#160;&#160;then&#160;self<br>&#160;&#160;elseif&#160;self.hasElement(path-&gt;head)<br>&#160;&#160;then&#160;let&#160;value&#160;=&#160;self.getElement(path-&gt;head)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;if&#160;value.isKindOf(NameSpace)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;value.lookupPath(path-&gt;tail,default)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif&#160;path-&gt;tail-&gt;isEmpty<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;value<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;default<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;else&#160;false<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="nameChanged"/><FONT FACE="Courier" SIZE="1">@Operation&#160;nameChanged(namedElement&#160;:&#160;XCore::Element,newName&#160;:&#160;XCore::Element,oldName&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;if&#160;namedElement.legalNameChangeCheck(newName,oldName)<br>&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;contents.remove(oldName);<br>&#160;&#160;&#160;&#160;contents.remove(newName);<br>&#160;&#160;&#160;&#160;contents.put(newName,namedElement)<br>&#160;&#160;else&#160;namedElement.name&#160;:=&#160;oldName<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="names"/><FONT FACE="Courier" SIZE="1">@Operation&#160;names():Set(String)<br>&#160;&#160;self.contents.keys()<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="newName"/><FONT FACE="Courier" SIZE="1">@Operation&#160;newName(root&#160;:&#160;String):String<br>&#160;&#160;let&#160;index&#160;=&#160;0<br>&#160;&#160;in&#160;@While&#160;self.hasElement(root&#160;+&#160;index.toString())&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;index&#160;:=&#160;index&#160;+&#160;1<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;root&#160;+&#160;index.toString()<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="populateGraphViz"/><FONT FACE="Courier" SIZE="1">@Operation&#160;populateGraphViz(browser&#160;:&#160;DiagramBrowser,gv&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;gv.setURL("diagram:"&#160;+&#160;self.path());<br>&#160;&#160;@For&#160;c&#160;in&#160;self.contents()-&gt;select(o&#160;|<br>&#160;&#160;&#160;&#160;o&#160;&lt;&gt;&#160;null&#160;and&#160;o.isKindOf(Class)&#160;and&#160;not&#160;(o.isKindOf(Package)))&#160;when&#160;browser.canShowClass(c)&#160;do<br>&#160;&#160;&#160;&#160;c.graphVizNode(browser,gv)<br>&#160;&#160;end;<br>&#160;&#160;@For&#160;p&#160;in&#160;self.contents()-&gt;select(o&#160;|<br>&#160;&#160;&#160;&#160;o&#160;&lt;&gt;&#160;null&#160;and&#160;o.isKindOf(Package))&#160;when&#160;browser.canShowPackage(p)&#160;do<br>&#160;&#160;&#160;&#160;p.graphVizNode(browser,gv)<br>&#160;&#160;end;<br>&#160;&#160;@For&#160;p&#160;in&#160;self.imports-&gt;select(o&#160;|<br>&#160;&#160;&#160;&#160;o&#160;&lt;&gt;&#160;null&#160;and&#160;o.isKindOf(NameSpace))&#160;do<br>&#160;&#160;&#160;&#160;@For&#160;c&#160;in&#160;p.contents()-&gt;select(o&#160;|<br>&#160;&#160;&#160;&#160;&#160;&#160;o&#160;&lt;&gt;&#160;null&#160;and&#160;o.isKindOf(Class)&#160;and&#160;not&#160;(o.isKindOf(Package)))&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;if&#160;browser.canImportClass(p,c)<br>&#160;&#160;&#160;&#160;&#160;&#160;then&#160;c.graphVizNode(browser,gv)<br>&#160;&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="putElement"/><FONT FACE="Courier" SIZE="1">@Operation&#160;putElement(name&#160;:&#160;String,value&#160;:&#160;Element):XCore::Element<br>&#160;&#160;if&#160;name.isKindOf(Symbol)<br>&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;contents.put(name,value);<br>&#160;&#160;&#160;&#160;self<br>&#160;&#160;else<br>&#160;&#160;&#160;&#160;contents.put(Symbol(name),value);<br>&#160;&#160;&#160;&#160;self<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="redefine"/><FONT FACE="Courier" SIZE="1">@Operation&#160;redefine(newElement&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;let&#160;oldElement&#160;=&#160;self.getElement(newElement.name)<br>&#160;&#160;in&#160;if&#160;oldElement.isKindOf(NamedElement)&#160;and&#160;oldElement.of()&#160;=&#160;newElement.of()<br>&#160;&#160;&#160;&#160;&#160;then&#160;if&#160;not&#160;oldElement.repopulate(newElement)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;self.add(newElement)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;else&#160;self.add(newElement)<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="remove"/><FONT FACE="Courier" SIZE="1">@Operation&#160;remove(element&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;if&#160;element.isKindOf(NamedElement)<br>&#160;&#160;then&#160;if&#160;contents.hasKey(element.name())<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;element.removeFromOwner();<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;contents.remove(element.name())<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;super(element)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;else&#160;super(element)<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="removeBinding"/><FONT FACE="Courier" SIZE="1">@Operation&#160;removeBinding(name&#160;:&#160;String):XCore::Element<br>&#160;&#160;contents.remove(name.asSymbol());<br>&#160;&#160;self.bindings&#160;:=&#160;bindings-&gt;reject(binding&#160;|<br>&#160;&#160;&#160;&#160;binding.name.toString()&#160;=&#160;name.toString())<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="removeImport"/><FONT FACE="Courier" SIZE="1">@Operation&#160;removeImport(n&#160;:&#160;NameSpace):XCore::Element<br>&#160;&#160;self.imports&#160;:=&#160;imports.excluding(n)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="resolveNameClash"/><FONT FACE="Courier" SIZE="1">@Operation&#160;resolveNameClash(name&#160;:&#160;XCore::Element,collection&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;let&#160;findSeq&#160;=&#160;collection-&gt;asSeq;<br>&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;=&#160;false;<br>&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;=&#160;null<br>&#160;&#160;in&#160;declare(hidden,findSeq);<br>&#160;&#160;&#160;&#160;&#160;declare(hidden,findDone);<br>&#160;&#160;&#160;&#160;&#160;declare(hidden,findResult);<br>&#160;&#160;&#160;&#160;&#160;@While&#160;not&#160;findSeq-&gt;isEmpty&#160;and&#160;not&#160;findDone&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;e&#160;=&#160;findSeq-&gt;head&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findElement&#160;=&#160;findSeq-&gt;head<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;declare(hidden,findElement);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;e.isKindOf(NamedElement)&#160;andthen&#160;e.name&#160;=&#160;name<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;:=&#160;true;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;:=&#160;self.remove(e)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;findSeq&#160;:=&#160;findSeq-&gt;tail<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;if&#160;not&#160;findDone<br>&#160;&#160;&#160;&#160;&#160;then&#160;false<br>&#160;&#160;&#160;&#160;&#160;else&#160;findResult<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end;<br>&#160;&#160;self<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="syntaxClasses"/><FONT FACE="Courier" SIZE="1">@Operation&#160;syntaxClasses():Set(Class)<br>&#160;&#160;let&#160;classes&#160;=&#160;Seq{}<br>&#160;&#160;in&#160;@For&#160;x&#160;inTableValues&#160;contents&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;x&#160;&lt;&gt;&#160;null&#160;andthen&#160;x.isKindOf(Class)&#160;andthen&#160;x.grammar&#160;&lt;&gt;&#160;null<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;classes&#160;:=&#160;Seq{x&#160;|&#160;classes}<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;x&#160;&lt;&gt;&#160;null&#160;andthen&#160;x.isKindOf(NameSpace)&#160;and&#160;x&#160;&lt;&gt;&#160;self<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;classes&#160;:=&#160;classes&#160;+&#160;x.syntaxClasses()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;classes<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="toGraphVizPage"/><FONT FACE="Courier" SIZE="1">@Operation&#160;toGraphVizPage(browser&#160;:&#160;DiagramBrowser):XCore::Element<br>&#160;&#160;let&#160;back():XCore::Element&#160;=&#160;browser.back()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;button&#160;=&#160;Button("Back",back)&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;left&#160;=&#160;Table("",Seq{Row(Seq{Centre(button)})}&#160;+&#160;browser.elements.asSeq()-&gt;reverse-&gt;collect(ns&#160;|<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Row(Seq{Text(ns.path())})))<br>&#160;&#160;in&#160;Page(self.path(),Seq{Form("xxx",Seq{Table("",Seq{Row(Seq{if&#160;browser.elements.isEmpty()<br>&#160;&#160;&#160;&#160;&#160;then&#160;Text("Top")<br>&#160;&#160;&#160;&#160;&#160;else&#160;Col(NullEnv().bind("valign","top"),left)<br>&#160;&#160;&#160;&#160;&#160;end&#160;,HTML(self.toSVG(browser))})})})})<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="toHTML"/><FONT FACE="Courier" SIZE="1">@Operation&#160;toHTML(root&#160;:&#160;String):XCore::Element<br>&#160;&#160;if&#160;(root&#160;+&#160;"/"&#160;+&#160;name.toString()).mkDir()<br>&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;@For&#160;element&#160;in&#160;self.contents()-&gt;excluding(self)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;element.toHTML(root&#160;+&#160;"/"&#160;+&#160;name.toString())<br>&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;let&#160;fout&#160;=&#160;FileOutputChannel(root&#160;+&#160;"/"&#160;+&#160;name.toString()&#160;+&#160;"/index.html")<br>&#160;&#160;&#160;&#160;in&#160;self.toHTMLDoc(fout);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;fout.close()<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;else&#160;false<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="toHTMLDoc"/><FONT FACE="Courier" SIZE="1">@Operation&#160;toHTMLDoc(fout&#160;:&#160;OutputChannel):XCore::Element<br>&#160;&#160;format(fout,"&lt;!DOCTYPE&#160;HTML&#160;PUBLIC&#160;"-//W3C//DTD&#160;HTML&#160;4.01&#160;Transitional//EN"&#160;"http://www.w3.org/TR/html4/loose.dtd"&gt;~%");<br>&#160;&#160;format(fout,"&lt;HTML&gt;~%&lt;HEAD&gt;~%&lt;TITLE&gt;~%~S~%&lt;/TITLE&gt;~%&lt;/HEAD&gt;~%",Seq{name});<br>&#160;&#160;format(fout,"&lt;FONT&#160;SIZE="+2"&gt;&lt;B&gt;~S&lt;/B&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;BR&gt;&lt;HR&gt;~%",Seq{name});<br>&#160;&#160;format(fout,"&lt;FONT&#160;SIZE="+1"&gt;&lt;B&gt;Overview&lt;/B&gt;&lt;/FONT&gt;&lt;BR&gt;~%");<br>&#160;&#160;format(fout,"&lt;P&gt;~%~S~%",Seq{self.doc().doc});<br>&#160;&#160;format(fout,"&lt;BR&gt;&lt;HR&gt;&lt;BR&gt;~%");<br>&#160;&#160;format(fout,"&lt;TABLE&#160;BORDER="1"&#160;WIDTH="100%"&#160;CELLPADDING="3"&#160;CELLSPACING="0"&#160;SUMMARY=""&gt;~%");<br>&#160;&#160;format(fout,"&lt;TR&#160;BGCOLOR="#CCCCFF"&#160;CLASS="TableHeadingColor"&gt;~%");<br>&#160;&#160;format(fout,"&lt;TD&#160;COLSPAN=2&gt;&lt;FONT&#160;SIZE="+2"&gt;~%");<br>&#160;&#160;format(fout,"&lt;B&gt;Contents&lt;/B&gt;&lt;/FONT&gt;&lt;/TD&gt;~%&lt;/TR&gt;~%");<br>&#160;&#160;@For&#160;c&#160;in&#160;self.contents()-&gt;asSeq-&gt;sortNamedElements&#160;when&#160;c.isKindOf(NamedElement)&#160;do<br>&#160;&#160;&#160;&#160;let&#160;docString&#160;=&#160;if&#160;c.hasSlot("documentation")&#160;and&#160;not&#160;c.isKindOf(ForeignOperation)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;c.doc().doc<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;"No&#160;Documentation&#160;Specified"<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;in&#160;if&#160;(c.isKindOf(Class))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;format(fout,"&lt;TR&gt;&lt;TD&gt;&lt;B&gt;&lt;A&#160;HREF="~S"&gt;~S&lt;/A&gt;&lt;/B&gt;&lt;/TD&gt;&lt;TD&gt;~S&lt;/TD&gt;&lt;/TR&gt;~%",Seq{c.href(self.pathSeq()),c.name(),docString})<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;format(fout,"&lt;TR&gt;&lt;TD&gt;&lt;B&gt;~S&lt;/B&gt;&lt;/TD&gt;&lt;TD&gt;~S&lt;/TD&gt;&lt;/TR&gt;~%",Seq{c.name(),docString})<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;end;<br>&#160;&#160;format(fout,"&lt;/TABLE&gt;~%");<br>&#160;&#160;format(fout,"&lt;/HTML&gt;~%")<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="toType"/><FONT FACE="Courier" SIZE="1">@Operation&#160;toType():XCore::Element<br>&#160;&#160;let&#160;sig&#160;=&#160;Signature(self.path())<br>&#160;&#160;in&#160;@For&#160;name&#160;inTableKeys&#160;contents&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;element&#160;=&#160;contents.get(name)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;@TypeCase(element)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;XCore::Package&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sig.bind(name.toString(),Package(Delayed(@Operation&#160;anonymous():XCore::Element<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;element.toType()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end)))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;XCore::Class&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sig.bind(name.toString(),Class(Delayed(@Operation&#160;anonymous():XCore::Element<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;element.toType()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end)))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;XCore::NameSpace&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sig.bind(name.toString(),NameSpace(Delayed(@Operation&#160;anonymous():XCore::Element<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;element.toType()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end)))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;XCore::ForeignOperation&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sig.bind(name.toString(),Value(Delayed(@Operation&#160;anonymous():XCore::Element<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;element.of().toType()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end)))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;XCore::Operation&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sig.bind(element.name().toString(),element.toNamedElement())<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;XCore::Attribute&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sig.bind(name.toString(),Field(Delayed(@Operation&#160;anonymous():XCore::Element<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;element.toType()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end)))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;sig<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="writeEcore"/><FONT FACE="Courier" SIZE="1">@Operation&#160;writeEcore(path&#160;:&#160;String):XCore::Element<br>&#160;&#160;@For&#160;package&#160;in&#160;self.allContentsOf(Package)&#160;do<br>&#160;&#160;&#160;&#160;package.writeEcore(path)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
</FONT>
</TD>
</TR>
</TABLE>
</HTML>
