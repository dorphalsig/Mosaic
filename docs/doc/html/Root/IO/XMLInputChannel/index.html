<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<TITLE>
XMLInputChannel
</TITLE>
</HEAD>
<FONT SIZE="+2"><B>XMLInputChannel</B></FONT><BR><BR><HR>
<FONT SIZE="+1"><B>Overview</B></FONT><BR>
<P>
No Documentation Specified
<BR><HR><BR>
<B>Parents</B>
<A HREF="../../../Root/IO/SAXInputChannel/index.html">SAXInputChannel</A>
,<A HREF="../../../Root/IO/InputChannel/index.html">InputChannel</A>
,<A HREF="../../../Root/XCore/Object/index.html">Object</A>
,<A HREF="../../../Root/XCore/Element/index.html">Element</A>
<BR><HR><BR>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructors</B></FONT></TD>
</TR>
<TR><TD>XMLInputChannel(input,inflater)</TD><TD> No Documentation </TD></TR>
</TABLE>
<BR><HR><BR>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=3><FONT SIZE="+2">
<B>Attributes</B></FONT></TD>
</TR>
<TR><TD><B>idTable</B></TD><TD><A HREF="../../../Root/XCore/Table/index.html">Table<A></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B>inflater</B></TD><TD><A HREF="../../../Root/IO/ObjectXMLInflater/index.html">ObjectXMLInflater<A></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B>stack</B></TD><TD><A HREF="../../../Root/Stacks/Stack/index.html">Stack<A></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B>valueIndex</B></TD><TD><A HREF="../../../Root/XCore/Integer/index.html">Integer<A></TD><TD>No Documentation Specified</TD></TR>
<TR>
<TD COLSPAN=3>
<FONT SIZE="-1">
<B>From</B> <A HREF="../../../Root/IO/SAXInputChannel/index.html">SAXInputChannel</A>: atts, chars, freeAtts, input, sin, tag. <BR><B>From</B> <A HREF="../../../Root/XCore/Element/index.html">Element</A>: roleFiller. <BR></FONT>
</TD>
</TR>
</TABLE>
<BR><HR><BR>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="2" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Operations</B></FONT></TD>
</TR>
<TR><TD><B><a href="#attValue">attValue</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>,name:<A HREF="../../../Root/XCore/String/index.html">String<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#characters">characters</a>(chars:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#decodeIndexedValue">decodeIndexedValue</a>(value:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#decodeInt">decodeInt</a>(value:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#decodeValue">decodeValue</a>(value:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endArray">endArray</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endClosure">endClosure</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endCodeBox">endCodeBox</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endCons">endCons</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endElement">endElement</a>(tag:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endFun">endFun</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endList">endList</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endObject">endObject</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endSet">endSet</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endSlot">endSlot</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endTable">endTable</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#endXMFData">endXMFData</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#inflater">inflater</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#openObject">openObject</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#parse">parse</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#pop">pop</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#push">push</a>(value:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#register">register</a>(value:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,id:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#result">result</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#setArray">setArray</a>(index:<A HREF="../../../Root/XCore/Integer/index.html">Integer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#setInflater">setInflater</a>(v:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#setList">setList</a>(list:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#setObjectAtts">setObjectAtts</a>(object:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startArray">startArray</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startClosure">startClosure</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startCodeBox">startCodeBox</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startCons">startCons</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startElement">startElement</a>(tag:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>,atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startFun">startFun</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startList">startList</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startNameSpaceRef">startNameSpaceRef</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startNilSlot">startNilSlot</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startNullSlot">startNullSlot</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startObject">startObject</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startRef">startRef</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startRefSlot">startRefSlot</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startSet">startSet</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startSlot">startSlot</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startStringSlot">startStringSlot</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startTable">startTable</a>(atts:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#startXMFData">startXMFData</a>(atts:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#top">top</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#valueIndexOf">valueIndexOf</a>(value:<A HREF="../../../Root/XCore/Buffer/index.html">Buffer<A>,char:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR>
<TD COLSPAN=2>
<FONT SIZE="-1">
<B>From</B> <A HREF="../../../Root/IO/SAXInputChannel/index.html">SAXInputChannel</A>: attribute, channel, characters, close, endElement, eof, freeAtt, freeAtts, getAtt, initialiseInput, parse, peek, prepareAttributes, prepareChars, prepareStartElement, prepareTag, read, read24, setChannel, startElement, toString. <BR><B>From</B> <A HREF="../../../Root/IO/InputChannel/index.html">InputChannel</A>: channel, close, eof, peek, read, read, readLine, readNonWhiteSpace, setChannel, skipWhiteSpace. <BR><B>From</B> <A HREF="../../../Root/XCore/Object/index.html">Object</A>: addDaemon, addDiagramListener, addMissingSlot, addMultiDaemon, addPersistentDaemon, addStructuralFeature, allCompositeValues, allCompositeValuesAndSelf, allDaemonsWithId, allDaemonsWithTarget, applyMapping_client, calcChildrenSlots, changedOnDiagram, compositeValues, daemonNamed, daemonWithId, daemonWithIdAndTarget, daemons, daemonsActive, destroyDaemon, edit, fire, get, getAvailableMappings, getChildren, getChildrenSlots, getChildrenToolTips, getDiagramListenerNamed, getDiagramListeners, getProperties, getProperty, getStructuralFeatureNames, hasDaemonNamed, hasDaemonWithId, hasDaemonWithIdAndTarget, hasDaemonWithTarget, hasProperty, hasSlot, hasStructuralFeature, hotLoad, hotLoaded, ignoreBy, ignoreByAll, init, initSlots, machineInit, nodeEvent, observeBy, observeBy, observedBy, observedBy, oldEdit, orderSequence, orderSequence, propertyTarget, removeDaemon, removeDaemonNamed, removeDaemonsWithId, removeDaemonsWithTarget, removeDiagramListener, removeDiagramListeners, removeStructuralFeature, renameSlot, saveXTO, saveXTOFile, set, setDaemons, setDaemonsActive, setHotLoad, setProperty, showAndLayoutDiagram, showDiagram, slotDenied, slotMissing, slotMissing, slots, synchronise. <BR><B>From</B> <A HREF="../../../Root/XCore/Element/index.html">Element</A>: addTo, allHTMLEntries, allHTMLPackages, assignToGlobal, assignToGlobal, browse, browse_redirect, checkConstraints, copy, copyToClipboard, copyToClipboard_transaction, createDiagram, createDiagramType, createDiagramType, createDiagramType, createTool, cutToClipboard, cutToClipboard_transaction, deleteRecursive, deployXML, die, doc, doubleClick, edit, edit_redirect, equals, error, evaluateExpression, ferror, getChildren, getChildrenToolTips, getDefaultClipboardSource, getDefaultClipboardTarget, graphVizNode, hashCode, init, init, invokeOp, isDeleteProtected, isKindOf, isProtected, isReallyKindOf, isTypeOf, isViewProtected, isWithinNameSpace, labelString, legalNameChangeCheck, legalSlotChangeCheck, legalSlotChangeCheck, lift, nameString, noOperationFound, oclIsKindOf, oclIsTypeOf, of, oldShowDiagram, pasteFromClipboard, populateGraphViz, pprint, pprint, pprint, pprintln, print, println, removeDaemon, removeDaemon, save, save2, selectDiagram, selectModelBrowserNode, send, setDelegation, setOf, setRoleFillerDialog, showAndLayoutDiagram, showDiagram, showModelBrowserNode, slotAffectsLabel, systemId, toHTML, toSVG, toSnapshot, toSnapshot, toString, toType, writeHTML, writeHTML, writeHTMLAllEntries, writeHTMLAllPackages, writeHTMLIndex, writeHTMLOverview, writeXML, writeXMLFile, yield. <BR><TR><TD COLSPAN=2><a name="attValue"/><FONT FACE="Courier" SIZE="1">@Operation&#160;attValue(atts&#160;:&#160;Buffer,name&#160;:&#160;String):XCore::Element<br>&#160;&#160;let&#160;value&#160;=&#160;null;<br>&#160;&#160;&#160;&#160;&#160;&#160;index&#160;=&#160;0<br>&#160;&#160;in&#160;@While&#160;index&#160;&lt;&#160;atts.size()&#160;and&#160;value&#160;=&#160;null&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;atts.ref(index).name.stringEqual(name)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;value&#160;:=&#160;atts.ref(index).value<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;index&#160;:=&#160;index&#160;+&#160;1<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;value<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="characters"/><FONT FACE="Courier" SIZE="1">@Operation&#160;characters(chars&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;null<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="decodeIndexedValue"/><FONT FACE="Courier" SIZE="1">@Operation&#160;decodeIndexedValue(value&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;@CaseInt[256]&#160;value-&gt;at(valueIndex)&#160;of<br>&#160;&#160;&#160;&#160;"I"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;self.decodeInt(value)<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"N"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;0&#160;-&#160;self.decodeInt(value)<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"F"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;let&#160;i&#160;=&#160;self.valueIndexOf(value,";"-&gt;at(0))&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;str&#160;=&#160;value.subString(valueIndex,i)<br>&#160;&#160;&#160;&#160;&#160;&#160;in&#160;self.valueIndex&#160;:=&#160;i&#160;+&#160;1;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;str.asFloat()<br>&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"S"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;let&#160;size&#160;=&#160;self.decodeInt(value)&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;=&#160;Kernel_mkString(size)<br>&#160;&#160;&#160;&#160;&#160;&#160;in&#160;@Count&#160;i&#160;from&#160;0&#160;to&#160;size&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Kernel_setCharAt(string,i,value-&gt;at(valueIndex&#160;+&#160;i))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;size;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string<br>&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"B"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;3;<br>&#160;&#160;&#160;&#160;&#160;&#160;value.stringEqual("B:1")<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"C"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;let&#160;size&#160;=&#160;self.decodeInt(value)&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;string&#160;=&#160;Kernel_mkString(size)<br>&#160;&#160;&#160;&#160;&#160;&#160;in&#160;@Count&#160;i&#160;from&#160;0&#160;to&#160;size&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Kernel_setCharAt(string,i,value-&gt;at(valueIndex&#160;+&#160;i))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;size;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Symbol(string)<br>&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"O"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"W"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;Set{}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"K"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;let&#160;head&#160;=&#160;self.decodeIndexedValue(value)&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tail&#160;=&#160;self.decodeIndexedValue(value)<br>&#160;&#160;&#160;&#160;&#160;&#160;in&#160;Seq{head&#160;|&#160;tail}<br>&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"Z"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;let&#160;head&#160;=&#160;self.decodeIndexedValue(value)&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tail&#160;=&#160;self.decodeIndexedValue(value)<br>&#160;&#160;&#160;&#160;&#160;&#160;in&#160;Seq{head&#160;|&#160;tail}-&gt;asSet<br>&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;"?"-&gt;at(0)&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;2;<br>&#160;&#160;&#160;&#160;&#160;&#160;"&lt;UNKNOWN&gt;"<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="decodeInt"/><FONT FACE="Courier" SIZE="1">@Operation&#160;decodeInt(value&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;n&#160;=&#160;0;<br>&#160;&#160;&#160;&#160;&#160;&#160;terminator&#160;=&#160;";"-&gt;at(0)<br>&#160;&#160;in&#160;@While&#160;value-&gt;at(valueIndex)&#160;&lt;&gt;&#160;terminator&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;n&#160;:=&#160;(n&#160;*&#160;10)&#160;+&#160;(value-&gt;at(valueIndex)&#160;-&#160;"0"-&gt;at(0));<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;1<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;self.valueIndex&#160;:=&#160;valueIndex&#160;+&#160;1;<br>&#160;&#160;&#160;&#160;&#160;n<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="decodeValue"/><FONT FACE="Courier" SIZE="1">@Operation&#160;decodeValue(value&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;self.valueIndex&#160;:=&#160;0;<br>&#160;&#160;self.decodeIndexedValue(value)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endArray"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endArray():XCore::Element<br>&#160;&#160;self.push(self.setArray(0))<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endClosure"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endClosure():XCore::Element<br>&#160;&#160;let&#160;data&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;fun&#160;=&#160;self.top()<br>&#160;&#160;in&#160;fun.setGlobals(Seq{data,fun.globals()}-&gt;asVector)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endCodeBox"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endCodeBox():XCore::Element<br>&#160;&#160;let&#160;constants&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;codeBox&#160;=&#160;self.top()<br>&#160;&#160;in&#160;codeBox.setConstants(constants)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endCons"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endCons():XCore::Element<br>&#160;&#160;let&#160;tail&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;head&#160;=&#160;self.pop()<br>&#160;&#160;in&#160;self.top()-&gt;head&#160;:=&#160;head;<br>&#160;&#160;&#160;&#160;&#160;self.top()-&gt;tail&#160;:=&#160;tail<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endElement"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endElement(tag&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;if&#160;tag.stringEqual("Array")<br>&#160;&#160;then&#160;self.endArray()<br>&#160;&#160;elseif&#160;tag.stringEqual("Int")<br>&#160;&#160;then&#160;null<br>&#160;&#160;elseif&#160;tag.stringEqual("String")<br>&#160;&#160;then&#160;null<br>&#160;&#160;elseif&#160;tag.stringEqual("Symbol")<br>&#160;&#160;then&#160;null<br>&#160;&#160;elseif&#160;tag.stringEqual("True")<br>&#160;&#160;then&#160;null<br>&#160;&#160;elseif&#160;tag.stringEqual("False")<br>&#160;&#160;then&#160;null<br>&#160;&#160;elseif&#160;tag.stringEqual("Null")<br>&#160;&#160;then&#160;null<br>&#160;&#160;elseif&#160;tag.stringEqual("Nil")<br>&#160;&#160;then&#160;null<br>&#160;&#160;elseif&#160;tag.stringEqual("Ref")<br>&#160;&#160;then&#160;null<br>&#160;&#160;elseif&#160;tag.stringEqual("NameSpaceRef")<br>&#160;&#160;then&#160;null<br>&#160;&#160;elseif&#160;tag.stringEqual("Slot")<br>&#160;&#160;then&#160;self.endSlot()<br>&#160;&#160;elseif&#160;tag.stringEqual("StringSlot")<br>&#160;&#160;then&#160;self.endSlot()<br>&#160;&#160;elseif&#160;tag.stringEqual("NullSlot")<br>&#160;&#160;then&#160;self.endSlot()<br>&#160;&#160;elseif&#160;tag.stringEqual("NilSlot")<br>&#160;&#160;then&#160;self.endSlot()<br>&#160;&#160;elseif&#160;tag.stringEqual("RefSlot")<br>&#160;&#160;then&#160;self.endSlot()<br>&#160;&#160;elseif&#160;tag.stringEqual("List")<br>&#160;&#160;then&#160;self.endList()<br>&#160;&#160;elseif&#160;tag.stringEqual("Cons")<br>&#160;&#160;then&#160;self.endCons()<br>&#160;&#160;elseif&#160;tag.stringEqual("Set")<br>&#160;&#160;then&#160;self.endSet()<br>&#160;&#160;elseif&#160;tag.stringEqual("Table")<br>&#160;&#160;then&#160;self.endTable()<br>&#160;&#160;elseif&#160;tag.stringEqual("Fun")<br>&#160;&#160;then&#160;self.endFun()<br>&#160;&#160;elseif&#160;tag.stringEqual("CodeBox")<br>&#160;&#160;then&#160;self.endCodeBox()<br>&#160;&#160;elseif&#160;tag.stringEqual("XMF-Data")<br>&#160;&#160;then&#160;self.endXMFData()<br>&#160;&#160;elseif&#160;tag.stringEqual("Closure")<br>&#160;&#160;then&#160;self.endClosure()<br>&#160;&#160;else&#160;inflater.endObject(tag,self)<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endFun"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endFun():XCore::Element<br>&#160;&#160;let&#160;target&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;owner&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;properties&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;globals&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;codeBox&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;fun&#160;=&#160;self.top()<br>&#160;&#160;in&#160;Kernel_funSetSelf(fun,target);<br>&#160;&#160;&#160;&#160;&#160;Kernel_funSetOwner(fun,owner);<br>&#160;&#160;&#160;&#160;&#160;Kernel_funSetProperties(fun,properties);<br>&#160;&#160;&#160;&#160;&#160;Kernel_funSetGlobals(fun,globals);<br>&#160;&#160;&#160;&#160;&#160;Kernel_funSetCodeBox(fun,codeBox)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endList"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endList():XCore::Element<br>&#160;&#160;self.push(self.setList(Seq{}))<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endObject"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endObject():XCore::Element<br>&#160;&#160;self.pop()<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endSet"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endSet():XCore::Element<br>&#160;&#160;let&#160;S&#160;=&#160;Set{}<br>&#160;&#160;in&#160;@While&#160;self.top()&#160;&lt;&gt;&#160;self&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;S&#160;:=&#160;S-&gt;including(self.pop())<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;self.pop();<br>&#160;&#160;&#160;&#160;&#160;self.push(S)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endSlot"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endSlot():XCore::Element<br>&#160;&#160;let&#160;object&#160;=&#160;self.openObject()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;value&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;name&#160;=&#160;self.pop()<br>&#160;&#160;in&#160;Kernel_addAtt(object,name,value)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endTable"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endTable():XCore::Element<br>&#160;&#160;let&#160;table&#160;=&#160;Table(100)<br>&#160;&#160;in&#160;@While&#160;self.top()&#160;&lt;&gt;&#160;self&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;value&#160;=&#160;self.pop()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;key&#160;=&#160;self.pop()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;table.put(key,value)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;self.pop();<br>&#160;&#160;&#160;&#160;&#160;let&#160;t&#160;=&#160;self.top()<br>&#160;&#160;&#160;&#160;&#160;in&#160;@For&#160;k&#160;inTableKeys&#160;table&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;t.put(k,table.get(k))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="endXMFData"/><FONT FACE="Courier" SIZE="1">@Operation&#160;endXMFData():XCore::Element<br>&#160;&#160;null<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="inflater"/><FONT FACE="Courier" SIZE="1">@Operation&#160;inflater[ACCESSOR=true]():XCore::Element<br>&#160;&#160;self.inflater<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="openObject"/><FONT FACE="Courier" SIZE="1">@Operation&#160;openObject():XCore::Element<br>&#160;&#160;let&#160;i&#160;=&#160;stack.topIndex()<br>&#160;&#160;in&#160;@While&#160;stack.ref(i)&#160;&lt;&gt;&#160;self&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;i&#160;:=&#160;i&#160;-&#160;1<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;stack.ref(i&#160;-&#160;1)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="parse"/><FONT FACE="Courier" SIZE="1">@Operation&#160;parse():XCore::Element<br>&#160;&#160;super();<br>&#160;&#160;self.result()<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="pop"/><FONT FACE="Courier" SIZE="1">@Operation&#160;pop():XCore::Element<br>&#160;&#160;stack.pop()<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="push"/><FONT FACE="Courier" SIZE="1">@Operation&#160;push(value&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;stack.push(value)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="register"/><FONT FACE="Courier" SIZE="1">@Operation&#160;register(value&#160;:&#160;XCore::Element,id&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;idTable.put(id,value)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="result"/><FONT FACE="Courier" SIZE="1">@Operation&#160;result():XCore::Element<br>&#160;&#160;inflater.result(stack.pop(),idTable)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="setArray"/><FONT FACE="Courier" SIZE="1">@Operation&#160;setArray(index&#160;:&#160;Integer):XCore::Element<br>&#160;&#160;let&#160;value&#160;=&#160;self.pop()<br>&#160;&#160;in&#160;if&#160;value&#160;=&#160;self<br>&#160;&#160;&#160;&#160;&#160;then&#160;self.pop()<br>&#160;&#160;&#160;&#160;&#160;else&#160;let&#160;array&#160;=&#160;self.setArray(index&#160;+&#160;1)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;array.put(array.size()&#160;-&#160;(index&#160;+&#160;1),value)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="setInflater"/><FONT FACE="Courier" SIZE="1">@Operation&#160;setInflater[UPDATER=true](v&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.inflater&#160;:=&#160;v<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="setList"/><FONT FACE="Courier" SIZE="1">@Operation&#160;setList(list&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;let&#160;element&#160;=&#160;self.pop()<br>&#160;&#160;in&#160;if&#160;element&#160;=&#160;self<br>&#160;&#160;&#160;&#160;&#160;then&#160;let&#160;cell&#160;=&#160;self.pop()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;if&#160;list-&gt;isEmpty<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;list<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cell-&gt;head&#160;:=&#160;list-&gt;head;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cell-&gt;tail&#160;:=&#160;list-&gt;tail;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cell<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;else&#160;self.setList(Seq{element&#160;|&#160;list})<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="setObjectAtts"/><FONT FACE="Courier" SIZE="1">@Operation&#160;setObjectAtts(object&#160;:&#160;XCore::Element,atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;@Count&#160;index&#160;from&#160;0&#160;to&#160;atts.size()&#160;do<br>&#160;&#160;&#160;&#160;let&#160;att&#160;=&#160;atts.ref(index)&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;name&#160;=&#160;att.name;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;value&#160;=&#160;att.value<br>&#160;&#160;&#160;&#160;in&#160;if&#160;(not&#160;name.stringEqual("id"))&#160;and&#160;(not&#160;name.stringEqual("path"))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;Kernel_addAtt(object,name.toString(),self.decodeValue(value))<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startArray"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startArray(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;id&#160;=&#160;self.attValue(atts,"id");<br>&#160;&#160;&#160;&#160;&#160;&#160;size&#160;=&#160;self.attValue(atts,"size").toString().asInt()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;array&#160;=&#160;Vector(size)<br>&#160;&#160;in&#160;self.register(array,id.toString());<br>&#160;&#160;&#160;&#160;&#160;self.push(array);<br>&#160;&#160;&#160;&#160;&#160;self.push(self)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startClosure"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startClosure(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;path&#160;=&#160;self.attValue(atts,"path").toString()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;args&#160;=&#160;self.attValue(atts,"path").toString()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;arity&#160;=&#160;self.attValue(atts,"arity").toString().asInt();<br>&#160;&#160;&#160;&#160;&#160;&#160;id&#160;=&#160;self.attValue(atts,"id").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;type&#160;=&#160;Seq{"XCore","Element"}&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;sig&#160;=&#160;args.splitBy(",",0,0)-&gt;collect(n&#160;|<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Seq{n,type})&#160;+&#160;Seq{Seq{2,type}};<br>&#160;&#160;&#160;&#160;&#160;&#160;op&#160;=&#160;path.lookupPath(Root);<br>&#160;&#160;&#160;&#160;&#160;&#160;newFun&#160;=&#160;Kernel_mkFun()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;findSeq&#160;=&#160;op.codeBox().constants()-&gt;asSeq-&gt;asSeq;<br>&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;=&#160;false;<br>&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;=&#160;null<br>&#160;&#160;in&#160;declare(hidden,findSeq);<br>&#160;&#160;&#160;&#160;&#160;declare(hidden,findDone);<br>&#160;&#160;&#160;&#160;&#160;declare(hidden,findResult);<br>&#160;&#160;&#160;&#160;&#160;@While&#160;not&#160;findSeq-&gt;isEmpty&#160;and&#160;not&#160;findDone&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;codeBox&#160;=&#160;findSeq-&gt;head&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findElement&#160;=&#160;findSeq-&gt;head<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;declare(hidden,findElement);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;codeBox.isKindOf(CodeBox)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;:=&#160;true;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;:=&#160;newFun.setOwner(Root);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;newFun.setArity(arity);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;newFun.setCodeBox(codeBox);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;newFun.setProperties(Seq{Seq{"closure"&#160;|&#160;path}});<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;newFun.setSig(sig);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.push(newFun);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.register(newFun,id)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;findSeq&#160;:=&#160;findSeq-&gt;tail<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;if&#160;not&#160;findDone<br>&#160;&#160;&#160;&#160;&#160;then&#160;false<br>&#160;&#160;&#160;&#160;&#160;else&#160;findResult<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startCodeBox"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startCodeBox(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;id&#160;=&#160;self.attValue(atts,"id").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;locals&#160;=&#160;self.attValue(atts,"locals").toString().asInt()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;codeBox&#160;=&#160;CodeBox(locals);<br>&#160;&#160;&#160;&#160;&#160;&#160;binary&#160;=&#160;self.attValue(atts,"binary").toString()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;instrs&#160;=&#160;binary.splitBy(",",0,0)-&gt;map("asInt");<br>&#160;&#160;&#160;&#160;&#160;&#160;source&#160;=&#160;self.attValue(atts,"source").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;resource&#160;=&#160;self.attValue(atts,"resource").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;name&#160;=&#160;self.attValue(atts,"name").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;i&#160;=&#160;0<br>&#160;&#160;in&#160;codeBox.setSource(source);<br>&#160;&#160;&#160;&#160;&#160;codeBox.setResourceName(resource);<br>&#160;&#160;&#160;&#160;&#160;codeBox.setName(name);<br>&#160;&#160;&#160;&#160;&#160;codeBox.setCode(Kernel_mkCode(instrs-&gt;size.div(2)));<br>&#160;&#160;&#160;&#160;&#160;@While&#160;not&#160;instrs-&gt;isEmpty&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;instr&#160;=&#160;instrs-&gt;head;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;operands&#160;=&#160;instrs-&gt;tail-&gt;head<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;codeBox.setInstrAt(i,instr,operands);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i&#160;:=&#160;i&#160;+&#160;1;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;instrs&#160;:=&#160;instrs-&gt;tail-&gt;tail<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;self.register(codeBox,id);<br>&#160;&#160;&#160;&#160;&#160;self.push(codeBox)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startCons"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startCons(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;cell&#160;=&#160;Seq{null&#160;|&#160;null};<br>&#160;&#160;&#160;&#160;&#160;&#160;id&#160;=&#160;self.attValue(atts,"id").toString()<br>&#160;&#160;in&#160;self.register(cell,id);<br>&#160;&#160;&#160;&#160;&#160;self.push(cell)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startElement"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startElement(tag&#160;:&#160;Buffer,atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;if&#160;tag.stringEqual("Ref")<br>&#160;&#160;then&#160;self.startRef(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("Array")<br>&#160;&#160;then&#160;self.startArray(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("True")<br>&#160;&#160;then&#160;self.push(true)<br>&#160;&#160;elseif&#160;tag.stringEqual("False")<br>&#160;&#160;then&#160;self.push(false)<br>&#160;&#160;elseif&#160;tag.stringEqual("List")<br>&#160;&#160;then&#160;self.startList(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("Cons")<br>&#160;&#160;then&#160;self.startCons(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("CodeBox")<br>&#160;&#160;then&#160;self.startCodeBox(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("Fun")<br>&#160;&#160;then&#160;self.startFun(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("Imports")<br>&#160;&#160;then&#160;self.startImports()<br>&#160;&#160;elseif&#160;tag.stringEqual("Property")<br>&#160;&#160;then&#160;self.startProperty(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("Sig")<br>&#160;&#160;then&#160;self.startSig(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("ElementArg")<br>&#160;&#160;then&#160;self.startElementArg(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("Arg")<br>&#160;&#160;then&#160;self.startArg(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("Table")<br>&#160;&#160;then&#160;self.startTable(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("Int")<br>&#160;&#160;then&#160;self.push(self.attValue(atts,"value").toString().asInt())<br>&#160;&#160;elseif&#160;tag.stringEqual("Nil")<br>&#160;&#160;then&#160;self.push(Seq{})<br>&#160;&#160;elseif&#160;tag.stringEqual("String")<br>&#160;&#160;then&#160;self.push(self.attValue(atts,"value").toString())<br>&#160;&#160;elseif&#160;tag.stringEqual("Set")<br>&#160;&#160;then&#160;self.startSet()<br>&#160;&#160;elseif&#160;tag.stringEqual("Symbol")<br>&#160;&#160;then&#160;self.push(Symbol(self.attValue(atts,"value").toString()))<br>&#160;&#160;elseif&#160;tag.stringEqual("Null")<br>&#160;&#160;then&#160;self.push(null)<br>&#160;&#160;elseif&#160;tag.stringEqual("Slot")<br>&#160;&#160;then&#160;self.startSlot(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("StringSlot")<br>&#160;&#160;then&#160;self.startStringSlot(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("NullSlot")<br>&#160;&#160;then&#160;self.startNullSlot(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("NilSlot")<br>&#160;&#160;then&#160;self.startNilSlot(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("RefSlot")<br>&#160;&#160;then&#160;self.startRefSlot(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("NameSpaceRef")<br>&#160;&#160;then&#160;self.startNameSpaceRef(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("XMF-Data")<br>&#160;&#160;then&#160;self.startXMFData(atts)<br>&#160;&#160;elseif&#160;tag.stringEqual("Closure")<br>&#160;&#160;then&#160;self.startClosure(atts)<br>&#160;&#160;else&#160;inflater.startObject(tag,atts,self)<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startFun"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startFun(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;fun&#160;=&#160;@Operation&#160;anonymous():XCore::Element<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;null<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;&#160;name&#160;=&#160;self.attValue(atts,"name").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;id&#160;=&#160;self.attValue(atts,"id").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;sig&#160;=&#160;self.decodeValue(self.attValue(atts,"sig"));<br>&#160;&#160;&#160;&#160;&#160;&#160;arity&#160;=&#160;self.attValue(atts,"arity").toString().asInt();<br>&#160;&#160;&#160;&#160;&#160;&#160;doc&#160;=&#160;self.attValue(atts,"doc").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;paths&#160;=&#160;self.decodeValue(self.attValue(atts,"imports"));<br>&#160;&#160;&#160;&#160;&#160;&#160;isVarArgs&#160;=&#160;self.attValue(atts,"isVarArgs").toString().asBool()<br>&#160;&#160;in&#160;Kernel_funSetName(fun,name);<br>&#160;&#160;&#160;&#160;&#160;Kernel_funSetArity(fun,arity);<br>&#160;&#160;&#160;&#160;&#160;Kernel_funSetSig(fun,sig);<br>&#160;&#160;&#160;&#160;&#160;Kernel_funSetDoc(fun,doc);<br>&#160;&#160;&#160;&#160;&#160;Kernel_funSetDynamics(fun,paths-&gt;collect(path&#160;|<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;nameSpace&#160;=&#160;path.lookupPath(Root)<br>&#160;&#160;&#160;&#160;&#160;in&#160;Seq{2&#160;|&#160;nameSpace.contents}<br>&#160;&#160;&#160;&#160;&#160;end));<br>&#160;&#160;&#160;&#160;&#160;self.register(fun,id);<br>&#160;&#160;&#160;&#160;&#160;self.push(fun)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startList"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startList(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;cell&#160;=&#160;Seq{null&#160;|&#160;null};<br>&#160;&#160;&#160;&#160;&#160;&#160;id&#160;=&#160;self.attValue(atts,"id").toString()<br>&#160;&#160;in&#160;self.register(cell,id);<br>&#160;&#160;&#160;&#160;&#160;self.push(cell);<br>&#160;&#160;&#160;&#160;&#160;self.push(self)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startNameSpaceRef"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startNameSpaceRef(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;path&#160;=&#160;self.attValue(atts,"path").toString()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;value&#160;=&#160;path.lookupPath(Root);<br>&#160;&#160;&#160;&#160;&#160;&#160;id&#160;=&#160;self.attValue(atts,"id").toString()<br>&#160;&#160;in&#160;if&#160;value&#160;=&#160;null<br>&#160;&#160;&#160;&#160;&#160;then&#160;self.error("Name&#160;Space&#160;Ref&#160;for&#160;"&#160;+&#160;path&#160;+&#160;"failed.")<br>&#160;&#160;&#160;&#160;&#160;else<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.register(value,id);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.push(value)<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startNilSlot"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startNilSlot(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;self.push(self.attValue(atts,"name").toString());<br>&#160;&#160;self.push(Seq{})<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startNullSlot"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startNullSlot(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;self.push(self.attValue(atts,"name").toString());<br>&#160;&#160;self.push(null)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startObject"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startObject(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;id&#160;=&#160;self.attValue(atts,"id").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;class&#160;=&#160;self.attValue(atts,"path").toString().lookupPath(Root)<br>&#160;&#160;in&#160;if&#160;class&#160;=&#160;null<br>&#160;&#160;&#160;&#160;&#160;then&#160;self.error("Cannot&#160;find&#160;class&#160;"&#160;+&#160;self.attValue(atts,"path"))<br>&#160;&#160;&#160;&#160;&#160;else&#160;let&#160;object&#160;=&#160;Kernel_newObj(class)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;self.setObjectAtts(object,atts);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.register(object,id);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.push(object);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.push(self)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startRef"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startRef(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;self.push(Ref(self.attValue(atts,"id").toString()))<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startRefSlot"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startRefSlot(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;self.push(self.attValue(atts,"name").toString());<br>&#160;&#160;self.push(Ref(self.attValue(atts,"id").toString()))<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startSet"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startSet():XCore::Element<br>&#160;&#160;self.push(self)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startSlot"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startSlot(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;self.push(self.attValue(atts,"name").toString())<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startStringSlot"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startStringSlot(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;self.push(self.attValue(atts,"name").toString());<br>&#160;&#160;self.push(self.attValue(atts,"value").toString())<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startTable"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startTable(atts&#160;:&#160;Buffer):XCore::Element<br>&#160;&#160;let&#160;id&#160;=&#160;self.attValue(atts,"id").toString();<br>&#160;&#160;&#160;&#160;&#160;&#160;size&#160;=&#160;self.attValue(atts,"size").toString().asInt()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;table&#160;=&#160;Table(size)<br>&#160;&#160;in&#160;self.register(table,id);<br>&#160;&#160;&#160;&#160;&#160;self.push(table);<br>&#160;&#160;&#160;&#160;&#160;self.push(self)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="startXMFData"/><FONT FACE="Courier" SIZE="1">@Operation&#160;startXMFData(atts&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;null<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="top"/><FONT FACE="Courier" SIZE="1">@Operation&#160;top():XCore::Element<br>&#160;&#160;stack.top()<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="valueIndexOf"/><FONT FACE="Courier" SIZE="1">@Operation&#160;valueIndexOf(value&#160;:&#160;Buffer,char&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;let&#160;i&#160;=&#160;valueIndex<br>&#160;&#160;in&#160;@While&#160;value-&gt;at(i)&#160;&lt;&gt;&#160;char&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;i&#160;:=&#160;i&#160;+&#160;1<br>&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;i<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
</FONT>
</TD>
</TR>
</TABLE>
</HTML>
