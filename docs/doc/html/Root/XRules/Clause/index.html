<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<TITLE>
Clause
</TITLE>
</HEAD>
<FONT SIZE="+2"><B>Clause</B></FONT><BR><BR><HR>
<FONT SIZE="+1"><B>Overview</B></FONT><BR>
<P>
No Documentation Specified
<BR><HR><BR>
<B>Parents</B>
<A HREF="../../../Root/XOCL/Syntax/index.html">Syntax</A>
,<A HREF="../../../Root/XCore/Performable/index.html">Performable</A>
,<A HREF="../../../Root/XCore/Located/index.html">Located</A>
,<A HREF="../../../Root/XCore/Object/index.html">Object</A>
,<A HREF="../../../Root/XCore/Element/index.html">Element</A>
<BR><HR><BR>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructors</B></FONT></TD>
</TR>
<TR><TD>Clause(head,body)</TD><TD> No Documentation </TD></TR>
</TABLE>
<BR><HR><BR>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=3><FONT SIZE="+2">
<B>Attributes</B></FONT></TD>
</TR>
<TR><TD><B>body</B></TD><TD><A HREF="../../../Root/XRules/Action/index.html">Seq(Action)<A></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B>head</B></TD><TD><A HREF="../../../Root/XRules/Term/index.html">Seq(Term)<A></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B>instrs</B></TD><TD><A HREF="../../../Root/Instrs/Instr/index.html">Seq(Instr)<A></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B>permanentVars</B></TD><TD><A HREF="../../../Root/XCore/Integer/index.html">Integer<A></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B>vars</B></TD><TD><A HREF="../../../Root/XRules/Var/index.html">Seq(Var)<A></TD><TD>No Documentation Specified</TD></TR>
<TR>
<TD COLSPAN=3>
<FONT SIZE="-1">
<B>From</B> <A HREF="../../../Root/XCore/Performable/index.html">Performable</A>: endLine, line. <BR><B>From</B> <A HREF="../../../Root/XCore/Located/index.html">Located</A>: charEnd, charStart. <BR><B>From</B> <A HREF="../../../Root/XCore/Element/index.html">Element</A>: roleFiller. <BR></FONT>
</TD>
</TR>
</TABLE>
<BR><HR><BR>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="2" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Operations</B></FONT></TD>
</TR>
<TR><TD><B><a href="#addToBody">addToBody</a>(v:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#addToHead">addToHead</a>(v:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#allocVars">allocVars</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#body">body</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#call">call</a>(name:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,rules:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,values:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,indent:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,env:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,succ:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,fail:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,cut:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,exception:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#compile">compile</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#compileBody">compileBody</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#compileGoal">compileGoal</a>(action:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#compileGoalArg">compileGoalArg</a>(term:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#compileHead">compileHead</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#compileHeadTerm">compileHeadTerm</a>(term:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#deleteFromBody">deleteFromBody</a>(v:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#deleteFromHead">deleteFromHead</a>(v:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#head">head</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#instrs">instrs</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#listBodyVars">listBodyVars</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#listHeadVars">listHeadVars</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#listVars">listVars</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#markVars">markVars</a>(vars:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,seenLocals:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,goalVars:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,seenPerms:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#markVars">markVars</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#performBody">performBody</a>(rules:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,values:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,body:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,vars:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,indent:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,env:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,succ:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,fail:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,cut:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,exception:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#permanentVars">permanentVars</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#setBody">setBody</a>(v:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#setHead">setHead</a>(v:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#setInstrs">setInstrs</a>(v:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#setPermanentVars">setPermanentVars</a>(v:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#setVars">setVars</a>():<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#toString">toString</a>():<A HREF="../../../Root/XCore/String/index.html">String<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR><TD><B><a href="#unifyHead">unifyHead</a>(rules:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,vars:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,values:<A HREF="../../../Root/XCore/Element/index.html">Element<A>,env:<A HREF="../../../Root/XCore/Element/index.html">Element<A>):<A HREF="../../../Root/XCore/Element/index.html">Element<A></B></TD><TD>No Documentation Specified</TD></TR>
<TR>
<TD COLSPAN=2>
<FONT SIZE="-1">
<B>From</B> <A HREF="../../../Root/XOCL/Syntax/index.html">Syntax</A>: compile, eval, lift, liftKeyArgs, liftValue, maxLocals, syntaxInit. <BR><B>From</B> <A HREF="../../../Root/XCore/Performable/index.html">Performable</A>: FV, compile, endLine, eval, line, maxLocals, pprint, pprint, pprint, setEndLine, setLine. <BR><B>From</B> <A HREF="../../../Root/XCore/Object/index.html">Object</A>: addDaemon, addDiagramListener, addMissingSlot, addMultiDaemon, addPersistentDaemon, addStructuralFeature, allCompositeValues, allCompositeValuesAndSelf, allDaemonsWithId, allDaemonsWithTarget, applyMapping_client, calcChildrenSlots, changedOnDiagram, compositeValues, daemonNamed, daemonWithId, daemonWithIdAndTarget, daemons, daemonsActive, destroyDaemon, edit, fire, get, getAvailableMappings, getChildren, getChildrenSlots, getChildrenToolTips, getDiagramListenerNamed, getDiagramListeners, getProperties, getProperty, getStructuralFeatureNames, hasDaemonNamed, hasDaemonWithId, hasDaemonWithIdAndTarget, hasDaemonWithTarget, hasProperty, hasSlot, hasStructuralFeature, hotLoad, hotLoaded, ignoreBy, ignoreByAll, init, initSlots, machineInit, nodeEvent, observeBy, observeBy, observedBy, observedBy, oldEdit, orderSequence, orderSequence, propertyTarget, removeDaemon, removeDaemonNamed, removeDaemonsWithId, removeDaemonsWithTarget, removeDiagramListener, removeDiagramListeners, removeStructuralFeature, renameSlot, saveXTO, saveXTOFile, set, setDaemons, setDaemonsActive, setHotLoad, setProperty, showAndLayoutDiagram, showDiagram, slotDenied, slotMissing, slotMissing, slots, synchronise. <BR><B>From</B> <A HREF="../../../Root/XCore/Element/index.html">Element</A>: addTo, allHTMLEntries, allHTMLPackages, assignToGlobal, assignToGlobal, browse, browse_redirect, checkConstraints, copy, copyToClipboard, copyToClipboard_transaction, createDiagram, createDiagramType, createDiagramType, createDiagramType, createTool, cutToClipboard, cutToClipboard_transaction, deleteRecursive, deployXML, die, doc, doubleClick, edit, edit_redirect, equals, error, evaluateExpression, ferror, getChildren, getChildrenToolTips, getDefaultClipboardSource, getDefaultClipboardTarget, graphVizNode, hashCode, init, init, invokeOp, isDeleteProtected, isKindOf, isProtected, isReallyKindOf, isTypeOf, isViewProtected, isWithinNameSpace, labelString, legalNameChangeCheck, legalSlotChangeCheck, legalSlotChangeCheck, lift, nameString, noOperationFound, oclIsKindOf, oclIsTypeOf, of, oldShowDiagram, pasteFromClipboard, populateGraphViz, pprint, pprint, pprint, pprintln, print, println, removeDaemon, removeDaemon, save, save2, selectDiagram, selectModelBrowserNode, send, setDelegation, setOf, setRoleFillerDialog, showAndLayoutDiagram, showDiagram, showModelBrowserNode, slotAffectsLabel, systemId, toHTML, toSVG, toSnapshot, toSnapshot, toString, toType, writeHTML, writeHTML, writeHTMLAllEntries, writeHTMLAllPackages, writeHTMLIndex, writeHTMLOverview, writeXML, writeXMLFile, yield. <BR><TR><TD COLSPAN=2><a name="addToBody"/><FONT FACE="Courier" SIZE="1">@Operation&#160;addToBody[EXTENDER=true](v&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.body&#160;:=&#160;self.body-&gt;including(v)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="addToHead"/><FONT FACE="Courier" SIZE="1">@Operation&#160;addToHead[EXTENDER=true](v&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.head&#160;:=&#160;self.head-&gt;including(v)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="allocVars"/><FONT FACE="Courier" SIZE="1">@Operation&#160;allocVars():XCore::Element<br>&#160;&#160;vars-&gt;iterate(var&#160;V&#160;=&#160;Seq{}&#160;|<br>&#160;&#160;&#160;&#160;Seq{Seq{var.name()&#160;|&#160;Kernel_copy(var)}&#160;|&#160;V})<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="body"/><FONT FACE="Courier" SIZE="1">@Operation&#160;body[ACCESSOR=true]():XCore::Element<br>&#160;&#160;self.body<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="call"/><FONT FACE="Courier" SIZE="1">@Operation&#160;call(name&#160;:&#160;XCore::Element,rules&#160;:&#160;XCore::Element,values&#160;:&#160;XCore::Element,indent&#160;:&#160;XCore::Element,env&#160;:&#160;XCore::Element,succ&#160;:&#160;XCore::Element,fail&#160;:&#160;XCore::Element,cut&#160;:&#160;XCore::Element,exception&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;let&#160;vars&#160;=&#160;self.allocVars()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;env&#160;=&#160;self.unifyHead(rules,vars,values,env)<br>&#160;&#160;in&#160;if&#160;env&#160;=&#160;null<br>&#160;&#160;&#160;&#160;&#160;then&#160;fail()<br>&#160;&#160;&#160;&#160;&#160;else<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;rules.debug<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;format(stdout,"~VTry&#160;~S(~{,~;~S~})~%",Seq{indent,name,recons(values,env)})<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.performBody(rules,values,body,vars,indent&#160;+&#160;2,env,succ,fail,cut,exception)<br>&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="compile"/><FONT FACE="Courier" SIZE="1">@Operation&#160;compile():XCore::Element<br>&#160;&#160;self.markVars();<br>&#160;&#160;self.instrs&#160;:=&#160;Seq{Allocate(permanentVars)}&#160;+&#160;self.compileHead()&#160;+&#160;self.compileBody()&#160;+&#160;Seq{Return()}<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="compileBody"/><FONT FACE="Courier" SIZE="1">@Operation&#160;compileBody():XCore::Element<br>&#160;&#160;body-&gt;iterate(action&#160;I&#160;=&#160;Seq{}&#160;|<br>&#160;&#160;&#160;&#160;I&#160;+&#160;self.compileGoal(action))<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="compileGoal"/><FONT FACE="Courier" SIZE="1">@Operation&#160;compileGoal(action&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;@Case&#160;action&#160;of<br>&#160;&#160;&#160;&#160;XRules::Call[name&#160;=&#160;n&#160;:&#160;XCore::Element,args&#160;=&#160;A&#160;:&#160;XCore::Element]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;A-&gt;iterate(term&#160;I&#160;=&#160;Seq{}&#160;|<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;I&#160;+&#160;self.compileGoalArg(term))&#160;+&#160;Seq{Call(n,A-&gt;size)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;else&#160;action.error("Unknown&#160;goal&#160;for&#160;compilation.")<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="compileGoalArg"/><FONT FACE="Courier" SIZE="1">@Operation&#160;compileGoalArg(term&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;@Case&#160;term&#160;of<br>&#160;&#160;&#160;&#160;XRules::Const[value&#160;=&#160;v&#160;:&#160;XCore::Element]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{Const(v)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Record[path&#160;=&#160;p&#160;:&#160;XCore::Element,fields&#160;=&#160;F&#160;:&#160;XCore::Element]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;F-&gt;iterate(field&#160;I&#160;=&#160;Seq{}&#160;|<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;I&#160;+&#160;self.compileGoalArg(field.value()))&#160;+&#160;Seq{Obj(p,F.name)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Terms[head&#160;=&#160;h&#160;:&#160;XCore::Element,tail&#160;=&#160;t&#160;:&#160;XCore::Element]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;self.compileGoalArg(h)&#160;+&#160;self.compileGoalArg(t)&#160;+&#160;Seq{Pair()}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Var[name&#160;=&#160;n&#160;:&#160;XCore::Element,type&#160;=&#160;[&#160;"LOCAL"&#160;],index&#160;=&#160;i&#160;:&#160;XCore::Element,seen&#160;=&#160;[&#160;false&#160;]]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{LocVar(i)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Var[name&#160;=&#160;n&#160;:&#160;XCore::Element,type&#160;=&#160;[&#160;"LOCAL"&#160;],index&#160;=&#160;i&#160;:&#160;XCore::Element,seen&#160;=&#160;[&#160;true&#160;]]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{RefLocVar(i)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Var[name&#160;=&#160;n&#160;:&#160;XCore::Element,type&#160;=&#160;[&#160;"PERM"&#160;],index&#160;=&#160;i&#160;:&#160;XCore::Element,seen&#160;=&#160;[&#160;false&#160;]]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{PermVar(i)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Var[name&#160;=&#160;n&#160;:&#160;XCore::Element,type&#160;=&#160;[&#160;"PERM"&#160;],index&#160;=&#160;i&#160;:&#160;XCore::Element,seen&#160;=&#160;[&#160;true&#160;]]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{RefPermVar(i)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;else&#160;term.error("Unknown&#160;body&#160;term&#160;for&#160;compilation.")<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="compileHead"/><FONT FACE="Courier" SIZE="1">@Operation&#160;compileHead():XCore::Element<br>&#160;&#160;head-&gt;reverse-&gt;iterate(term&#160;I&#160;=&#160;Seq{}&#160;|<br>&#160;&#160;&#160;&#160;I&#160;+&#160;self.compileHeadTerm(term))<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="compileHeadTerm"/><FONT FACE="Courier" SIZE="1">@Operation&#160;compileHeadTerm(term&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;@Case&#160;term&#160;of<br>&#160;&#160;&#160;&#160;XRules::Const[value&#160;=&#160;v&#160;:&#160;XCore::Element]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{UnifyConst(v)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Record[path&#160;=&#160;p&#160;:&#160;XCore::Element,fields&#160;=&#160;F&#160;:&#160;XCore::Element]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{UnifyObj(p,F.name)}&#160;+&#160;F-&gt;reverse-&gt;iterate(field&#160;I&#160;=&#160;Seq{}&#160;|<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;I&#160;+&#160;self.compileHeadTerm(field.value()))<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Terms[head&#160;=&#160;h&#160;:&#160;XCore::Element,tail&#160;=&#160;t&#160;:&#160;XCore::Element]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{UnifyPair()}&#160;+&#160;self.compileHeadTerm(h)&#160;+&#160;self.compileHeadTerm(t)<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Var[name&#160;=&#160;n&#160;:&#160;XCore::Element,type&#160;=&#160;[&#160;"LOCAL"&#160;],index&#160;=&#160;i&#160;:&#160;XCore::Element,seen&#160;=&#160;[&#160;false&#160;]]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{BindLocVar(i)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Var[name&#160;=&#160;n&#160;:&#160;XCore::Element,type&#160;=&#160;[&#160;"LOCAL"&#160;],index&#160;=&#160;i&#160;:&#160;XCore::Element,seen&#160;=&#160;[&#160;true&#160;]]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{UnifyLocVar(i)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Var[name&#160;=&#160;n&#160;:&#160;XCore::Element,type&#160;=&#160;[&#160;"PERM"&#160;],index&#160;=&#160;i&#160;:&#160;XCore::Element,seen&#160;=&#160;[&#160;false&#160;]]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{BindPermVar(i)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;Var[name&#160;=&#160;n&#160;:&#160;XCore::Element,type&#160;=&#160;[&#160;"PERM"&#160;],index&#160;=&#160;i&#160;:&#160;XCore::Element,seen&#160;=&#160;[&#160;true&#160;]]&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;Seq{UnifyPermVar(i)}<br>&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;else&#160;term.error("Unknown&#160;head&#160;term&#160;for&#160;compilation.")<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="deleteFromBody"/><FONT FACE="Courier" SIZE="1">@Operation&#160;deleteFromBody[REDUCER=true](v&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.body&#160;:=&#160;self.body-&gt;excluding(v)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="deleteFromHead"/><FONT FACE="Courier" SIZE="1">@Operation&#160;deleteFromHead[REDUCER=true](v&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.head&#160;:=&#160;self.head-&gt;excluding(v)<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="head"/><FONT FACE="Courier" SIZE="1">@Operation&#160;head[ACCESSOR=true]():XCore::Element<br>&#160;&#160;self.head<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="instrs"/><FONT FACE="Courier" SIZE="1">@Operation&#160;instrs[ACCESSOR=true]():XCore::Element<br>&#160;&#160;self.instrs<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="listBodyVars"/><FONT FACE="Courier" SIZE="1">@Operation&#160;listBodyVars():XCore::Element<br>&#160;&#160;body-&gt;collect(action&#160;|<br>&#160;&#160;&#160;&#160;action.listVars())<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="listHeadVars"/><FONT FACE="Courier" SIZE="1">@Operation&#160;listHeadVars():XCore::Element<br>&#160;&#160;head-&gt;iterate(term&#160;V&#160;=&#160;Seq{}&#160;|<br>&#160;&#160;&#160;&#160;V&#160;+&#160;term.listVars())<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="listVars"/><FONT FACE="Courier" SIZE="1">@Operation&#160;listVars():XCore::Element<br>&#160;&#160;Seq{self.listHeadVars()}&#160;+&#160;self.listBodyVars()<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="markVars"/><FONT FACE="Courier" SIZE="1">@Operation&#160;markVars(vars&#160;:&#160;XCore::Element,seenLocals&#160;:&#160;XCore::Element,goalVars&#160;:&#160;XCore::Element,seenPerms&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;if&#160;vars-&gt;isEmpty<br>&#160;&#160;then&#160;if&#160;not&#160;goalVars-&gt;isEmpty<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;self.markVars(goalVars-&gt;head,Seq{},goalVars-&gt;tail,seenPerms)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;self.permanentVars&#160;:=&#160;seenPerms-&gt;size<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;else&#160;let&#160;var&#160;=&#160;vars-&gt;head&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findSeq&#160;=&#160;seenPerms-&gt;asSeq;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;=&#160;false;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;=&#160;null<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;declare(hidden,findSeq);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;declare(hidden,findDone);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;declare(hidden,findResult);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;@While&#160;not&#160;findSeq-&gt;isEmpty&#160;and&#160;not&#160;findDone&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;n&#160;=&#160;findSeq-&gt;head&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findElement&#160;=&#160;findSeq-&gt;head<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;declare(hidden,findElement);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;n&#160;=&#160;var.name()<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;:=&#160;true;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;:=&#160;var.index&#160;:=&#160;seenPerms-&gt;indexOf(n);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.type&#160;:=&#160;"PERM";<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.seen&#160;:=&#160;true;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.markVars(vars-&gt;tail,seenLocals,goalVars,seenPerms)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;findSeq&#160;:=&#160;findSeq-&gt;tail<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;not&#160;findDone<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;let&#160;findSeq&#160;=&#160;goalVars-&gt;asSeq;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;=&#160;false;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;=&#160;null<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;declare(hidden,findSeq);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;declare(hidden,findDone);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;declare(hidden,findResult);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;@While&#160;not&#160;findSeq-&gt;isEmpty&#160;and&#160;not&#160;findDone&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;Gv&#160;=&#160;findSeq-&gt;head&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findElement&#160;=&#160;findSeq-&gt;head<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;in&#160;declare(hidden,findElement);<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;Gv-&gt;exists(gv&#160;|<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gv.name()&#160;=&#160;var.name())<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findDone&#160;:=&#160;true;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;findResult&#160;:=&#160;var.index&#160;:=&#160;seenPerms-&gt;size;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.type&#160;:=&#160;"PERM";<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.seen&#160;:=&#160;false;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.markVars(vars-&gt;tail,seenLocals,goalVars,seenPerms&#160;+&#160;Seq{var.name()})<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;findSeq&#160;:=&#160;findSeq-&gt;tail<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;not&#160;findDone<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;if&#160;seenLocals-&gt;includes(var.name())<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.index&#160;:=&#160;seenLocals-&gt;indexOf(var.name());<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.type&#160;:=&#160;"LOCAL";<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.seen&#160;:=&#160;true;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.markVars(vars-&gt;tail,seenLocals,goalVars,seenPerms)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.index&#160;:=&#160;seenLocals-&gt;size;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.type&#160;:=&#160;"LOCAL";<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;var.seen&#160;:=&#160;false;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.markVars(vars-&gt;tail,seenLocals&#160;+&#160;Seq{var.name()},goalVars,seenPerms)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;findResult<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else&#160;findResult<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end&#160;<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="markVars"/><FONT FACE="Courier" SIZE="1">@Operation&#160;markVars():XCore::Element<br>&#160;&#160;let&#160;vars&#160;=&#160;self.listVars()&#160;then<br>&#160;&#160;&#160;&#160;&#160;&#160;headVars&#160;=&#160;vars-&gt;head;<br>&#160;&#160;&#160;&#160;&#160;&#160;bodyVars&#160;=&#160;vars-&gt;tail;<br>&#160;&#160;&#160;&#160;&#160;&#160;seenLocals&#160;=&#160;Seq{};<br>&#160;&#160;&#160;&#160;&#160;&#160;seenPerms&#160;=&#160;Seq{}<br>&#160;&#160;in&#160;if&#160;not&#160;bodyVars-&gt;isEmpty<br>&#160;&#160;&#160;&#160;&#160;then&#160;vars&#160;:=&#160;Seq{headVars&#160;+&#160;bodyVars-&gt;head}&#160;+&#160;bodyVars-&gt;tail<br>&#160;&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;&#160;end&#160;;<br>&#160;&#160;&#160;&#160;&#160;self.markVars(vars-&gt;head,seenLocals,vars-&gt;tail,seenPerms)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="performBody"/><FONT FACE="Courier" SIZE="1">@Operation&#160;performBody(rules&#160;:&#160;XCore::Element,values&#160;:&#160;XCore::Element,body&#160;:&#160;XCore::Element,vars&#160;:&#160;XCore::Element,indent&#160;:&#160;XCore::Element,env&#160;:&#160;XCore::Element,succ&#160;:&#160;XCore::Element,fail&#160;:&#160;XCore::Element,cut&#160;:&#160;XCore::Element,exception&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;if&#160;body-&gt;isEmpty<br>&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;if&#160;rules.debug()<br>&#160;&#160;&#160;&#160;then&#160;format(stdout,"~VSucceed(~{,~;~S~})~%",Seq{indent,recons(values,env)})<br>&#160;&#160;&#160;&#160;else&#160;false<br>&#160;&#160;&#160;&#160;end&#160;;<br>&#160;&#160;&#160;&#160;succ(env,fail)<br>&#160;&#160;elseif&#160;body-&gt;tail-&gt;isEmpty<br>&#160;&#160;then&#160;body-&gt;head.perform(rules,vars,indent,env,succ,fail,cut,exception)<br>&#160;&#160;else&#160;body-&gt;head.perform(rules,vars,indent,env,@Operation&#160;anonymous(env&#160;:&#160;XCore::Element,fail&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self.performBody(rules,values,body-&gt;tail,vars,indent,env,succ,fail,cut,exception)<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;end,fail,cut,exception)<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="permanentVars"/><FONT FACE="Courier" SIZE="1">@Operation&#160;permanentVars[ACCESSOR=true]():XCore::Element<br>&#160;&#160;self.permanentVars<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="setBody"/><FONT FACE="Courier" SIZE="1">@Operation&#160;setBody[UPDATER=true](v&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.body&#160;:=&#160;v<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="setHead"/><FONT FACE="Courier" SIZE="1">@Operation&#160;setHead[UPDATER=true](v&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.head&#160;:=&#160;v<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="setInstrs"/><FONT FACE="Courier" SIZE="1">@Operation&#160;setInstrs[UPDATER=true](v&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.instrs&#160;:=&#160;v<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="setPermanentVars"/><FONT FACE="Courier" SIZE="1">@Operation&#160;setPermanentVars[UPDATER=true](v&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;self.permanentVars&#160;:=&#160;v<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="setVars"/><FONT FACE="Courier" SIZE="1">@Operation&#160;setVars():XCore::Element<br>&#160;&#160;@For&#160;term&#160;in&#160;head&#160;do<br>&#160;&#160;&#160;&#160;self.vars&#160;:=&#160;term.vars(vars)<br>&#160;&#160;end;<br>&#160;&#160;@For&#160;action&#160;in&#160;body&#160;do<br>&#160;&#160;&#160;&#160;self.vars&#160;:=&#160;action.vars(vars)<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="toString"/><FONT FACE="Courier" SIZE="1">@Operation&#160;toString():String<br>&#160;&#160;try<br>&#160;&#160;&#160;&#160;self.of().name.toString()&#160;+&#160;"("&#160;+&#160;if&#160;self.hasSlot("head")<br>&#160;&#160;&#160;&#160;then&#160;self.head.toString()<br>&#160;&#160;&#160;&#160;else&#160;"NO&#160;SLOT&#160;--&gt;"&#160;+&#160;"head"&#160;+&#160;"&lt;--"<br>&#160;&#160;&#160;&#160;end&#160;&#160;+&#160;","&#160;+&#160;if&#160;self.hasSlot("body")<br>&#160;&#160;&#160;&#160;then&#160;self.body.toString()<br>&#160;&#160;&#160;&#160;else&#160;"NO&#160;SLOT&#160;--&gt;"&#160;+&#160;"body"&#160;+&#160;"&lt;--"<br>&#160;&#160;&#160;&#160;end&#160;&#160;+&#160;")"<br>&#160;&#160;catch(exception)<br>&#160;&#160;&#160;&#160;self.of().name&#160;+&#160;"(Constructor&#160;Error!)"<br>&#160;&#160;end<br>end</FONT>
</TD></TR>
<TR><TD COLSPAN=2><a name="unifyHead"/><FONT FACE="Courier" SIZE="1">@Operation&#160;unifyHead(rules&#160;:&#160;XCore::Element,vars&#160;:&#160;XCore::Element,values&#160;:&#160;XCore::Element,env&#160;:&#160;XCore::Element):XCore::Element<br>&#160;&#160;if&#160;head-&gt;size&#160;=&#160;values-&gt;size<br>&#160;&#160;then&#160;<br>&#160;&#160;&#160;&#160;@For&#160;arg,value&#160;in&#160;head,values&#160;when&#160;env&#160;&lt;&gt;&#160;null&#160;do<br>&#160;&#160;&#160;&#160;&#160;&#160;env&#160;:=&#160;unify(arg.build(rules,vars),value,env)<br>&#160;&#160;&#160;&#160;end;<br>&#160;&#160;&#160;&#160;env<br>&#160;&#160;else&#160;null<br>&#160;&#160;end&#160;<br>end</FONT>
</TD></TR>
</FONT>
</TD>
</TR>
</TABLE>
</HTML>
