\documentclass{scrreprt}
%\usepackage{float}
\usepackage{fullpage}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{listings}
\usepackage{underscore}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{graphicx}
\usepackage[bookmarks=true]{hyperref}
\usepackage{pdfpages}
\usepackage{cite}

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\definecolor{airforceblue}{rgb}{0.66, .0, 0.36}

\hypersetup{
%    bookmarks=false,    % show bookmarks bar?
    pdftitle={Software Requirement Specification},    % title
    pdfauthor={Homer J. Simpson},                     % author
    pdfsubject={TeX and LaTeX},                        % subject of the document
    pdfkeywords={TeX, LaTeX, graphics, images}, % list of keywords
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=blue,       % color of internal links
    citecolor=black,       % color of links to bibliography
    filecolor=black,        % color of file links
    urlcolor=purple,        % color of external links
    linktoc=page            % only page is linked
}

\def\myversion{1.0 }

\newcounter{myCounter}[subsubsection] 
\newcounter{mySubCounter}[myCounter] 

\makeatletter
\newcommand{\reqLabel}[1]{%
\myLabel{#1}{Req}}
\makeatother

\makeatletter
\newcommand{\reqLabelB}[1]{%
\myLabelB{#1}{Req}}
\makeatother

\makeatletter
\newcommand{\specLabel}[1]{%
\myLabel{#1}{Spec}}
\makeatother

\makeatletter
\newcommand{\specLabelB}[1]{%
\myLabelB{#1}{Spec}}
\makeatother

\makeatletter
\newcommand{\defLabel}[1]{%
\myLabel{#1}{Def}}
\makeatother

\makeatletter
\newcommand{\nfLabel}[1]{%
\myLabel{#1}{NF}}
\makeatother

\makeatletter
\newcommand{\rightMouse}{%
\includegraphics[width=15pt]{img/rightMouse.jpg}}
\makeatother

\makeatletter
\newcommand{\rightArrow}{%
\includegraphics[width=10pt]{img/rightArrow.png}\hspace{1mm}}
\makeatother

\makeatletter
\newcommand{\of}{%
\includegraphics[height=8pt]{img/arrowOf.png}\hspace{1mm}}
\makeatother
\makeatletter
\newcommand{\extends}{%
\includegraphics[height=8pt]{img/arrowExtends.png}\hspace{1mm}}
\makeatother
\makeatletter
\newcommand{\has}{%
\includegraphics[height=8pt]{img/arrowHas.png}\hspace{1mm}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Variante 1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\layerOne}[1]{\chapter{#1}}
\newcommand{\layerOneStar}[1]{\chapter*{#1}}
\newcommand{\layerTwo}[1]{\section{#1} \setcounter{myCounter}{0}}
\newcommand{\layerThree}[1]{\subsection{#1} \setcounter{myCounter}{0}}
\newcommand{\layerFour}[1]{\subsubsection{#1}}

\makeatletter
	\newcommand{\myLabel}[2]{%
		\refstepcounter{myCounter}
		\def\@currentlabel{#2-\thesubsubsection.\arabic{myCounter}}% Update label
		\raisebox{\f@size pt}\phantomsection
		\label{req:#1}
		#2-\thesubsubsection.\arabic{myCounter}}
\makeatother

%\makeatletter
%	\newcommand{\myLabelFour}[2]{%
%		\refstepcounter{myCounter}
%		\def\@currentlabel{#2-\thesubsection.\arabic{myCounter}}% Update label
%		\raisebox{\f@size pt}\phantomsection
%		\label{req:#1}
%		#2-\thesubsection.\arabic{myCounter}}
%\makeatother

\newcommand{\kmh}{$kmh^{-1}$}

\makeatletter
	\newcommand{\myLabelB}[2]{%
		\refstepcounter{mySubCounter}
		\def\@currentlabel{#2-\thesubsubsection.\arabic{myCounter}\alph{mySubCounter}}%
		% Update label
		\raisebox{\f@size pt}\phantomsection
		\label{req:#1}
		#2-\thesubsubsection.\arabic{myCounter}\alph{mySubCounter}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Variante 2 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%\newcommand{\layerOne}[1]{\part{#1}}
%\newcommand{\layerOneStar}[1]{\part*{#1}}
%\newcommand{\layerTwo}[1]{\chapter{#1}}
%\newcommand{\layerThree}[1]{\section{#1}}
%
%\makeatletter
%	\newcommand{\myLabel}[2]{%
%		\refstepcounter{myCounter}
%		\def\@currentlabel{#2-\thesubsection.\arabic{myCounter}}% Update label
%		\raisebox{\f@size pt}\phantomsection
%		\label{req:#1}
%		#2-\thesubsection.\arabic{myCounter}}
%\makeatother
%
%\makeatletter
%	\newcommand{\myLabelB}[2]{%
%		\refstepcounter{mySubCounter}
%		\def\@currentlabel{#2-\thesubsection.\arabic{myCounter}\alph{mySubCounter}}% Update label
%		\raisebox{\f@size pt}\phantomsection
%		\label{req:#1}
%		#2-\thesubsection.\arabic{myCounter}\alph{mySubCounter}}
%\makeatother
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Variante Ende %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
  \newcommand{\myRef}[1]{
  \ref{req:#1}}
\makeatother

\makeatletter
  \newcommand{\comment}{
  \hspace{1em} \textit{Comment}}
\makeatother

\makeatletter
  \newcommand{\issue}[1]{
  \href{https://github.com/xmf-xmodeler/Mosaic/issues/#1}{Git Issue \##1}}
\makeatother
\title{
\flushright
\rule{15.5cm}{5pt}\vskip1cm
\Huge{SOFTWARE REQUIREMENTS\\ SPECIFICATION}\\
\vspace{2cm}
for\\
\vspace{2cm}
XModeler\\
\vspace{2cm}
\LARGE{Release 1.0\\}
\vspace{2cm}
\LARGE{Version \myversion approved\\}
\vfill
\rule{15.5cm}{5pt}
}
\date{}
\usepackage{hyperref}
\begin{document}
\maketitle
%\includepdf[pages=1]{img/title.pdf}
\newpage
\phantomsection
\addcontentsline{toc}{chapter}{Contents}

\tableofcontents

\clearpage
\phantomsection
\addcontentsline{toc}{chapter}{Revision History}
\layerOneStar{Revision History}

\layerOne{Requirements} 

\begin{tabularx}{\textwidth}[t]{|l|X|} \hline
\reqLabel{general:r1} & Some requirements may be optional. \myRef{general:s1}\\ \hline
\end{tabularx}

\layerTwo{Web Site} 

\begin{tabularx}{\textwidth}[t]{|l|X|} \hline
\reqLabel{Website:General:r1} & 
The website is available online. \\\hline& 
A slightly different version is available in XModeler. \\\hline OR&  The online version is accessed from XModeler, but unavailable when offline. \\\hline OR& XModeler tries to access the online version, but keeps a offline version as backup. \\\hline &
The online version cannot use the XModeler's hijacking mode for references.\\
\hline
\end{tabularx}

\layerThree{Content} 

\begin{tabularx}{\textwidth}[t]{|l|X|} \hline
\reqLabel{Website:Content:r1} & 
The website should include a tutorial.\\
\hline
\reqLabel{Website:Content:r2} & 
The website should include a "`API"', explaining the basic data types and classes.\\
\hline
\reqLabel{Website:Content:r3} & 
The website should include an explanation of basic language concepts. (grammar, operators)\\
\hline
\reqLabel{Website:Content:r4} & 
The website should include snippets. (Small examples on a specific topic, like how to read from a file)\\
\hline
\reqLabel{Website:Content:r5} & 
The website should include a list of literature, with links if possible.\\
\hline
\reqLabel{Website:Content:r6} & 
The website should include a link to git, Maybe direct links to the Issues?\\
\hline
\reqLabel{Website:Content:r7} & 
The website should include information about contact. \textit{Whom was it made by? How do I contact them, report a bug?\ldots}\\
\hline
\end{tabularx}

\layerThree{Design} 
\begin{tabularx}{\textwidth}[t]{|l|X|} \hline
\reqLabel{Website:Design:r1} & 
The design should have a primary and a secondary colour. These, together with grayscale colours should be used predominantly. 
\myRef{Website:Design:s1}, \myRef{Website:Design:s2}\\
\hline
\reqLabel{Website:Design:r2} & The website is split vertically: Title, Links, local Links, Content
\\\hline
\end{tabularx}

\layerTwo{MeMo-Language}

\begin{tabularx}{\textwidth}[t]{|l|X|} \hline
\reqLabel{MeMo:General:r1} & 
The MultiLevel language MeMo requires\ldots\\
\hline
\reqLabel{MeMo:General:r2} & 
The MultiLevel language MeMo requires\ldots\\
\hline
\reqLabel{MeMo:General:r3} & 
The MultiLevel language MeMo requires\ldots\\
\hline
\end{tabularx}

\layerTwo{Kernel}
\layerTwo{X-Modeler}

\layerThree{Diagrams}

\layerFour{Multi-Level Diagram}

\layerThree{Forms}

\layerFour{FormsClient}

\begin{tabularx}{\textwidth}[t]{|l|X|} \hline
\reqLabel{Forms:FormsClient:r1} & 
The FormsClient receives messages to add components.\\
\hline
\reqLabel{Forms:FormsClient:r2} & 
The FormsClient must be able to display these components:
\begin{itemize}
  \item Label
  \item Textfield
  \item Textarea
  \item Checkbox
\end{itemize}
The component is determined by the type of the value.\\
\hline
\reqLabelB{Forms:FormsClient:r2a} & 
A boolean is shown as a Checkbox\\\hline
\reqLabelB{Forms:FormsClient:r2b} & 
An enum is shown as a drop-down-list\\\hline
\reqLabelB{Forms:FormsClient:r2c} & 
A short(?define) Strings or a number is shown as Textfield\\\hline
\reqLabelB{Forms:FormsClient:r2d} & 
A long(?define) String is shown as Textarea\\\hline
\reqLabel{Forms:FormsClient:r3} & 
Labels can be grouped with other components to form a key-value-pair.\\
\hline
\reqLabel{Forms:FormsClient:r4} & 
A form client has a listener for changes which will be transferred instantly to
the underlying model. There are no Save, Cancel or Undo buttons.\\\hline
\reqLabel{Forms:FormsClient:r5} & 
The FormsClient is linked to the underlying model.\\\hline
\reqLabel{Forms:FormsClient:r6} & 
The FormsClient's components are linked to the underlying model's parts
by an id.\\\hline
\comment & Labels should not be empty. \issue{34}\\\hline
\comment & Double click should not freeze the form. \issue{33}\\\hline
\end{tabularx}

\layerOne{Specifications} 

\setcounter{myCounter}{0}
\begin{tabularx}{\textwidth}[t]{|l|X|} \hline
\specLabel{general:s1} & Some specifications may be optional.
\myRef{general:r1}\\
\hline
\end{tabularx}

\layerTwo{Web Site}

\layerThree{Design} 
\begin{tabularx}{\textwidth}[t]{|l|X|} \hline
\specLabel{Website:Design:s1} & 
The design's primary colour is \#1155BB. \myRef{Website:Design:r1}\\
\hline
\specLabel{Website:Design:s2} & 
The design's secondary colour is \#22AA44. \myRef{Website:Design:r1}\\
\hline
\end{tabularx}

\layerTwo{XMF-Language}
\layerTwo{Kernel}
\layerTwo{X-Modeler}

\layerThree{Diagrams}

\layerFour{Multi-Level Diagram}

%\layerThree{Signals}
%
%\begin{tabularx}{\textwidth}[t]{|l|X|}
%	  \hline
%    \specLabel{signal:hp0} & Hp0: Stop aspect. One or two red lights. See
    % Fig.~\ref{fig:hp012}, \myRef{signal:1}, \myRef{signal:1a} \\	\hline
%		\specLabel{signal:hp1} & Hp1: Proceed aspect. One green light. See
		% Fig.~\ref{fig:hp012}, \myRef{signal:1}\\ \hline
%		\specLabel{signal:hp2} & Hp2: Slow aspect. One green over one yellow light.
		% Shown for speeds up to $60kmh^{-1}$. If no speed is specified by Zs3 the limit is $40kmh^{-1}$.
%		This default speed limit may be changed to $50kmh^{-1}$ or $60kmh^{-1}$. 
%		See Fig.~\ref{fig:hp012} \\ \hline
%\end{tabularx}
%
%\vspace{.5cm}
%\begin{figure}[ht!]
%	\centering
%	\includegraphics[width=420pt]{img/hp012.pdf}
%	\caption{from left to right: Hp0, Hp1, Hp2}
%	\label{fig:hp012}
%\end{figure} 

%\noindent

\layerOne{Other}

\layerTwo{git}

\includegraphics[width=120pt]{img/git-IconDecorations.png} %% von http://wiki.eclipse.org/EGit/User_Guide

\begin{itemize}
  \item \textbf{dirty (folder)} - At least one file below the folder is dirty; that
  means that it has changes in the working tree that are neither in the index nor in the repository.
  \item \textbf{tracked} - The resource is known to the Git repository and hence
  under version control.
  \item \textbf{untracked} - The resource is not known to the Git repository
  and will not be version controlled until it is explicitly added.
  \item \textbf{ignored} - The resource is ignored by the Git team provider. The
  preference settings under Team $>$ Ignored Resources, "derived" flag and
  settings from .gitignore files are taken into account.
  \item \textbf{dirty} - The resource has changes in the working tree that are
  neither in the index nor in the repository.
  \item \textbf{staged} - The resource has changes which have been added to the
  index. Note that adding changes to the index is currently possible only in the commit dialog via the context menu of a resource.
  \item \textbf{partially-staged} - The resource has changes which are added to the
  index and additional changes in the working tree that neither reached the index nor have been committed to the repository. See partial staging from the Git Staging view for how to do that.
  \item \textbf{added} - The resource has not yet reached any commit in the
  repository but has been freshly added to the Git repository in order to be tracked in future.
  \item \textbf{removed} - The resource is staged for removal from the Git
  repository.
  \item \textbf{conflict} - A merge conflict exists for the file.
  \item \textbf{assume-valid} - The resource has the "assume unchanged" flag. This
  means that Git stops checking the working tree files for possible modifications, so you need to manually unset the bit to tell Git when you change the working tree file. Also see Assume unchanged action.
\end{itemize}

\layerThree{fetch}

Fetch from remote repository

\layerThree{pull}

Incorporates changes from a remote repository into the current branch. 
In its default mode, git pull is shorthand for git fetch followed by git merge FETCH_HEAD.

\layerThree{commit}

Commit changes to local repository

\layerThree{push}

Push Commits to remote repository

\layerThree{conflicts}

\url{http://wiki.eclipse.org/EGit/User_Guide#Resolving_a_merge_conflict}

\layerThree{branches}
branch
merge
rebase
cherry-pick

\layerThree{revert}

If a commit which has not yet been pushed has to be undone:

Select folder \rightMouse Team \rightArrow Show in History \\
Note number of commit
\\ then use command line \\
{\ttfamily git revert <noted number>}

\vspace{5mm}
\noindent If a commit which has already been pushed has to be undone:

Is done the same way.

\vspace{5mm}
\noindent Note: Both reverts don't undo history. The wrong commit and the reversion will
be logged.

\layerOne{Example}

\begin{figure}[ht!]
	\centering
	\includegraphics[width=185pt]{img/classDiagram1.pdf}
	\caption{Basic Class diagram}
	\label{fig:exampleDogClassDiagram}
\end{figure} 

Dog extends (\extends) {\ttfamily Object} .It does not extend {\ttfamily Class}. It is an instance of (\of) {\ttfamily Class}. {\ttfamily Fido} is an instance of (\of) {\ttfamily Dog}. Therefore (commonly spoken): Fido is a Dog. Dog is a Class. But: Is {\ttfamily Fido} an {\ttfamily Object}? Is {\ttfamily Dog} an {\ttfamily Object}?

Differentiate between 
\begin{itemize}
	\item the \textit{operation} of() which returns the target of the \of of-Arrow \\
and 
	\item the \textit{operator} instance? which returns true if second argument is \of of() or anything of() \of\extends inherited from
  \item isTypeOf
  \item isReallyTypeOf
\end{itemize}

\begin{figure}[ht!]
	\centering
	\includegraphics[width=195pt]{img/classDiagram2.pdf}
	\caption{Extended Class diagram}
	\label{fig:exampleDogClassDiagram2}
\end{figure} 

\begin{verbatim}
parserImport XOCL;

\end{verbatim}
The class {\ttfamily OmniscientClass} extends {\ttfamily Class}. Any instance of
it will therefore be a class.
\begin{verbatim}
context Root
  @Class OmniscientClass isabstract extends Class 
  @Attribute instances : Vector = Vector(12) end
  @Attribute numberInstances : Integer = 0 end
  @Attribute pluralName : String (?) end
  
  @Operation getPluralName() : String  
    name + "s"
  end
  
  @Operation new():Element
    if numberInstances >= 3 
    then let
       o = super()
       in
\end{verbatim}
This line is throwing an exception, when too many instances of the
OmniscientClass are created. It uses the function {\ttfamily getPluralName()} to
test about overwriting functions. In most cases the plural is formed by
appending a {\ttfamily s}. This is done in the default function above. The word ``Mouse''
however has an irregular plural and therefore needs to overwrite the function,
returning ``Mice'' instead of the default ``Mouses''.

Instead of overwriting functions, attributes could be used. In this case it
proves a worse choice as every slot has to be filled manually, and no useful
default can be provided.
\begin{verbatim}
          self.error("According to popular belief, " 
          + (numberInstances+1) + " " 
          + o.getPluralName() 
       // + pluralName 
          + " are deemed unlucky.")
    end
    else 
      let 
        o = super()
      in let
        c = o.of()
      in
        c.instances.put(numberInstances,o);
        self.numberInstances := numberInstances +1;
        o
      end end
    end
  end
end
\end{verbatim}
Class {\ttfamily Dog} is an instance of {\ttfamily OmniscientClass}. It is a
class because it's {\ttfamily of} is {\ttfamily Class} or a any extension
thereof.
\begin{verbatim}
context Root
  @Class Dog metaclass OmniscientClass
  @Attribute name : String = "nameless Dog" end
  @Constructor(name) ! end
  @Slot OmniscientClass::pluralName = "Dogs" end
\end{verbatim}
As {\ttfamily Dog} does not extend {\ttfamily Class}, this function is not
supposed to be called. However, it can be called by {\ttfamily(Dog())()},
naturally causing an exception to be thrown somewhere in {\ttfamily super()}.
It can be called without an exception if {\ttfamily Dog} would extend {\ttfamily Class}.
\begin{verbatim}
  @Operation new():Element
    "Dog.new".println();
    super()
  end
end

context Root
  @Class Cat metaclass OmniscientClass
  @Attribute name : String = "nameless Cat" end
  @Constructor(name) ! end
  @Slot OmniscientClass::pluralName = "Cats" end
end
\end{verbatim}
The class {\ttfamily Mouse} 
\begin{verbatim}
context Root
  @Class Mouse metaclass OmniscientClass
  @Attribute name : String = "nameless Mouse" end
  @Constructor(name) ! end
  @Slot OmniscientClass::pluralName = "Mice" end
  @Operation getPluralName() : String  
    "Mice"
  end
end

  Root::dog1 := Dog.new();
  Root::dog1.name := "Fido";
  Root::mouse1 := Mouse("Mickey");
\end{verbatim}

\layerOne{Literature}

\begin{itemize}
  \item A Unifying Approach to Connections for Multi-Level Modeling
  \cite{article:AtkinsonGerbigKuehne2015}
  \begin{itemize}
  \item Melanie: Multi-level Modeling and Ontology Engineering
  Environment \cite{article:AtkinsonGerbig2012}
  \item Referenced 2
  \item Referenced 3
\end{itemize}
\end{itemize}

\layerTwo{Integrating Language Engineering\cite{article:ClarkFrank0000}...}




\nocite{article:test}

\input{WeeklyReports.tex}

\clearpage
\phantomsection
\addcontentsline{toc}{chapter}{Bibliography}
\bibliography{literature}
\bibliographystyle{literatureStyle}
\end{document}
